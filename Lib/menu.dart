//freshfit ~ Upon this rock i will build my church
import 'dart:developer';
import 'dart:core';
import 'package:FreshFit/cart/cart1.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut1.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut2.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut3.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut4.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut5.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut6.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut7.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut8.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut9.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut10.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut11.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut12.dart';
import 'package:FreshFit/widgets/widgets/tutorial/tut13.dart';
import 'package:audioplayers/audioplayers.dart';
import 'package:flutter_swipe_detector/flutter_swipe_detector.dart';
import 'package:lottie/lottie.dart';
import 'dart:async';
import 'package:FreshFit/receipt.dart';
import 'package:FreshFit/transit1.dart';
import 'package:avatar_glow/avatar_glow.dart';
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';
import 'package:fluttertoast/fluttertoast.dart';
import 'dart:convert';
import 'package:google_mobile_ads/google_mobile_ads.dart';
import 'package:ionicons/ionicons.dart';
import 'package:overlay_tutorial/overlay_tutorial.dart';
//import 'package:place_picker/place_picker.dart';
import 'login.dart';
import 'package:FreshFit/notifications/comment9.dart';
import 'ad_helper.dart';
import 'package:http/http.dart' as http;
import 'package:flutter_beep/flutter_beep.dart';
import 'package:flutter_barcode_scanner/flutter_barcode_scanner.dart';
import 'legal.dart';
import 'package:qr_flutter/qr_flutter.dart';
import 'package:google_fonts/google_fonts.dart';
import 'login.dart';
import 'main.dart';
import 'orders.dart';
import 'payments.dart';
import 'preorder.dart';
//import 'mpesa.dart';
import 'shoppinglist.dart';
import 'package:FreshFit/newchat/newchat/newchat.dart';//mx3Freshfit\newchat\newchat
import 'thank.dart';
import 'package:flutter/cupertino.dart';
import 'dart:ui';
import 'restaurants.dart';
import 'package:collection/collection.dart';
import 'dart:core';
import 'package:intl/intl.dart';
import 'package:shared_preferences/shared_preferences.dart';
import 'splashmap.dart';
import 'notifications.dart';
import 'package:mpesa_flutter_plugin/mpesa_flutter_plugin.dart';
import 'search2.dart';
import 'imgechange.dart';
import 'package:shimmer/shimmer.dart';
import 'package:mpesa/mpesa.dart';
import 'package:flutter_keyboard_visibility/flutter_keyboard_visibility.dart';
import 'package:showcaseview/showcaseview.dart';
import 'dart:math';
import 'package:confetti/confetti.dart';

class Rutimetable extends StatefulWidget {
  Rutimetable(
      {Key? key,
      required this.title,
      required this.token,
      required this.geolocation,
      required this.user,
      required this.id,
      required this.firstname,
      //required this.food1,
      required this.me})
      : super(key: key);
//, required this.title
  final String title;
  final String token;
  final String user;
  final String geolocation;
  final String id;
  final String firstname;

  //final String food1;
  final String me;

  @override
  _RutimetableState createState() => _RutimetableState();
}

class _RutimetableState extends State<Rutimetable> with SingleTickerProviderStateMixin{
  bool lang1 = false;
  bool isTutorialenabled = false;
  final audioCache = AudioPlayer();
  //late ConfettiController _controllerTopCenter;
  var lang2;
  late Fluttertoast flutterToast;
  late ConfettiController _controllerTopCenter;
  void _onHorizontalSwipe(SwipeDirection direction) {
    if (direction == SwipeDirection.left) {
      // Handle left swipevoid _onHorizontalSwipe(SwipeDirection direction) {
    if (direction == SwipeDirection.left) {
      // Handle left swipe
    } else if (direction == SwipeDirection.right) {
      // Handle right swipe
    }
  }

  void _onVerticalSwipe(SwipeDirection direction) {//|hitler|returning_user
    if (direction == SwipeDirection.up) {
       events.add({"${leo}":"Swiped up|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});

      // Handle up swipe
    } else if (direction == SwipeDirection.down) {
      events.add({"${leo}":"Swiped down|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    }  else if (direction == SwipeDirection.right) {
      events.add({"${leo}":"Swiped right|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    }
  }

   
  }

  void _onVerticalSwipe(SwipeDirection direction) {
    if (direction == SwipeDirection.up) {
      events.add({"${leo}":"Swiped up|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    } else if (direction == SwipeDirection.down) {
      events.add({"${leo}":"Swiped down|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    }
  }


  Future<void> startCheckout(
      {required String userPhone, required double amount}) async {
    //Preferably expect 'dynamic', response type varies a lot!
    dynamic transactionInitialisation;
    //Better wrap in a try-catch for lots of reasons.
    try {
      //Run it
      transactionInitialisation = await MpesaFlutterPlugin.initializeMpesaSTKPush(
          businessShortCode: "174379",
          transactionType: TransactionType.CustomerPayBillOnline,
          amount: amount,
          partyA: userPhone,
          partyB: "174379",
          callBackURL:
              Uri(scheme: "https", host: "1234.1234.co.ke", path: "/1234.php"),
          accountReference: "${widget.me}",
          phoneNumber: userPhone,
          baseUri: Uri(scheme: "https", host: "sandbox.safaricom.co.ke"),
          transactionDesc: "purchase",
          passKey:
              'bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919');

      print("TRANSACTION RESULT: " +
          transactionInitialisation['MerchantRequestID']);
      setState(() {
        transactionInitialisationx = transactionInitialisation.toString();
      });
      //You can check sample parsing here -> https://github.com/keronei/Mobile-Demos/blob/mpesa-flutter-client-app/lib/main.dart

      /*Update your db with the init data received from initialization response,
      * Remaining bit will be sent via callback url*/
      return transactionInitialisation;
    } catch (e) {
      //For now, console might be useful
      print("CAUGHT EXCEPTION: " + e.toString());

      /*
      Other 'throws':
      1. Amount being less than 1.0
      2. Consumer Secret/Key not set
      3. Phone number is less than 9 characters
      4. Phone number not in international format(should start with 254 for KE)
       */
    }
  }

  //change this
  GlobalKey _one = GlobalKey();
  GlobalKey _two = GlobalKey();
  GlobalKey _three = GlobalKey();
  String selectedValue = "Settings";
  int overlaycounter = 1;
  retball() {
    Widget toast = salenote?SizedBox():Container(
      padding: const EdgeInsets.symmetric(horizontal: 24.0, vertical: 12.0),
      decoration: BoxDecoration(
          borderRadius: BorderRadius.circular(10.0),
          color: Colors.grey.withOpacity(0.5)),
      child: Row(
        mainAxisSize: MainAxisSize.min,
        children: [
          // Icon(Icons.check),
          
          CircleAvatar(
                                                    radius: 13,
          child:Center(child:Container(
              height: 20, width: 20, child: Image.asset("assets/carrot.png")),)),
          (int.parse(generateRandomString2(1)) / 7) != 0
              ? lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                  ? Text(
                      " ${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " just completed an Order",style:TextStyle(color:darkmode?Colors.white:Colors.black))
                  : Text(
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " Amekamilisha Order",style:TextStyle(color:darkmode?Colors.white:Colors.black))
              : lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                  ? Text(
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          "+ 5 others made a group order",style:TextStyle(color:Colors.yellow))
                  : Text(
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " na Wengine 5 walifanya agizo la kikundi",style:TextStyle(color:darkmode?Colors.white:Colors.black)),
        ],
      ),
    );

   Fluttertoast.showToast(
    //webPosition: "right",
msg:  (int.parse(generateRandomString2(1)) / 7) != 0
              ? lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                  ? 
                      " ${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " just completed an Order"
                  : 
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " Amekamilisha Order"
              : lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                  ? 
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          "+ 5 others made a group order"
                  : 
                      "${generateRandomString(1)}******${generateRandomString2(1)}" +
                          " na Wengine 5 walifanya agizo la kikundi",
//toastLength: Toast.LENGTH_SHORT,
gravity: ToastGravity.TOP,
//timeInSec: 1,
backgroundColor: Colors.grey.withOpacity(0.4),
textColor: Colors.white,
fontSize: 16.0
);
  }

  String generateRandomString(int lengthOfString) {
    final random = Random();
    const allChars = 'AaBbCcDdlMmNnOoPpQqRrSsTtUuVvWwXxYyZz1EeFfGgHhIiJjKkL';
    // below statement will generate a random string of length using the characters
    // and length provided to it
    final randomString = List.generate(lengthOfString,
        (index) => allChars[random.nextInt(allChars.length)]).join();
    return randomString; // return the generated string
  }

  String generateRandomString2(int lengthOfString) {
    final random = Random();
    const allChars = '123456789';
    // below statement will generate a random string of length using the characters
    // and length provided to it
    final randomString = List.generate(lengthOfString,
        (index) => allChars[random.nextInt(allChars.length)]).join();
    return randomString; // return the generated string
  }

  String generateRandomString3(int lengthOfString) {
    final random = Random();
    const allChars = '172839465';
    // below statement will generate a random string of length using the characters
    // and length provided to it
    final randomString = List.generate(lengthOfString,
        (index) => allChars[random.nextInt(allChars.length)]).join();
    return randomString; // return the generated string
  }

  bool darkmode = false;
  bool salenote = false;
  bool notification = false;
  Future<InitializationStatus> _initGoogleMobileAds() {
    // TODO: Initialize Google Mobile Ads SDK
    return MobileAds.instance.initialize();
  }

  late BannerAd _bannerAd;
  // TODO: Add _isBannerAdReady
  bool _isBannerAdReady = false;

  xls(String order) {
    return Ninotify.showNotification(
      id: 2,
      title: order,
      body: 'Your order is ready',
      payload: 'r',
    );
  }

  //const Rutimetable({Key? key}) : super(key: key);
  var sky;
  var picpic;
  var information;
  var leo;
  String transactionInitialisationx = '';
  bool xon = false;
  var currentpage;
  List events=[];//
  var geolocation;

  // ['id','username','datetime','sessiontime','event','device','geolocation']
  //var newthing();
  var now;
  late var selectedTime = TimeOfDay.now();
  kisw(String X) {
    var a;
    var b = {
      "vegetables": "mboga",
      "Fruits": "Matunda",
      "Herbs and Spices": "viungo vya upishi",
      "Cereals": "nafaka"
    };
    a = b[X];
    return a.toString();
  }

  Future mpesacall() {
    return showModalBottomSheet(
        //isScrollControlled: true,
        context: context,
        builder: (context) {
          return SizedBox(
            height: MediaQuery.of(context).size.height * .3,
            child: Column(children: [
              //Text(wild.toString()),

              ListTile(
                onTap: () {
                  //showPlacePicker();
                },
                //leading: Icon(Icons.phone),
                title: Center(
                  child: Row(
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Container(
                          width: MediaQuery.of(context).size.width * .7,
                          child: Padding(
                            padding: const EdgeInsets.only(
                                left: 15.0, right: 15.0, top: 15, bottom: 0),
                            //padding: EdgeInsets.symmetric(horizontal: 15),
                            child: TextField(
                              
                              controller: titleController4,
                              obscureText: false,
                              decoration: InputDecoration(
                                  filled: true,
                                  fillColor: Colors.grey[100],
                                  //fillColor: Colors.white,
                                  border: OutlineInputBorder(
                                      borderRadius:
                                          BorderRadius.circular(10.0)),

                                  //border: OutlineInputBorder(),
                                  labelText: 'Mpesa phone number',
                                  hintText: 'Enter your Mpesa Phone number'),
                            ),
                          ),
                        ),
                        Container(
                          width: MediaQuery.of(context).size.width * .1,
                          child: FloatingActionButton(
                            mini: true,
                            onPressed: () {},
                            child: const Icon(Icons.done),
                          ),
                        ),
                      ]),
                ),
              ),
              const ListTile(

                  //leading: Icon(Icons.location_pin),
                  //title: const Text("My delivery Address"),
                  ),
              ListTile(
                title: Text("",
                    style: GoogleFonts.lato(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                        color: Colors.black)),
                onTap: () {
                  ;
                  //get out of my app
                },
              ),
            ]),
          );
        });
  }

  searchfoodz() {
    week_area = DateFormat('dd MMM').format(DateTime.now());
    leo = DateFormat.jm().format(DateTime.now());
    now = DateFormat('EEEE dd MMM')
        .format(DateTime.now()); //returns json body from api
    print(leo);
    //this.courseblock = result1;
    var titleController;
    titleController.text = '';
    List rono = food7;
    bool woz = true; //yea i was listening to steve wozniak
    List chosen = [];

    String transactionInitialisationx = '';
    String works = '';
    KeyboardVisibilityController().onChange.listen((event) {
      setState(() {
        softkey = event;
        if (softkey == true) {
          works = 'ollo';
        }
        ;
      });

      print("THE KEYBOARD" + softkey.toString());
    });

    num sum = 0;
    for (num e in amount) {
      sum += e;
      print(sum);
      //sumx = sum;
    }
    List ronox;
    void sq(List x) {
      setState(() => ronox = x);
      //print(ronox);

      //rono was here 5/20/22~2:29am
      //rono was here again 6/9/22~4:15am
      //rono was here again 1/10/23~2:20pm
      //rono was here again 9/13/24~12:01pm
    }

    print('search bar' + titleController.text);
    return showModalBottomSheet(
        isScrollControlled: true,
        context: context,
        builder: (context) {
          return SizedBox(
            height: MediaQuery.of(context).size.height,
            child: Column(children: [
              //Text(wild.toString()),
              const ListTile(),
              ListTile(
                  onTap: () {
                    //showPlacePicker();
                  },
                  //leading: Icon(Icons.phone),
                  title: Container(
                    height: 55,
                    width: MediaQuery.of(context).size.width,
                    color: darkmode ? Colors.white : Colors.black,
                    child: Padding(
                      //padding: const EdgeInsets.only(left:15.0,right: 15.0,top:0,bottom: 0),
                      padding: const EdgeInsets.symmetric(horizontal: 15),
                      child: TextField(
                       style: TextStyle(
                                                color: Colors.white,
                                               ),

                        onTap: () {
                          events.add({"${leo}":"Tapped on Search|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                          woz = true;
                          print(rono);
                          sq(rono
                              .where(
                                (x) => x['name'].toLowerCase().contains(''),
                                //print(x);
                              )
                              .toList());
                        },
                        //actions:[],
                        onChanged: (text) {
                          //print(rono[0]['food'][0]['name']);

                          //print("can't get this" + rono.toString());

                          woz = true;

                          sq(rono
                              .where(
                                (x) => x['name']
                                    .toLowerCase()
                                    .contains(text.toLowerCase()),
                                //print(x);
                              )
                              .toList());
                          print(rono.first);
                          events.add({"${leo}":"Searched: ${text}"});//back to this
                          
                        },
                                               
                        autofocus: false,
                        controller: titleController,
                        
                        decoration: InputDecoration(
                          labelStyle: TextStyle(
                                                color: darkmode ? Colors.white : Colors.black),

                            prefixIcon: Icon(Icons.search,
                                color: darkmode ? Colors.white : Colors.black),
                            suffixIcon: woz
                                ? InkWell(
                                    child: Icon(Icons.close,
                                        color: darkmode
                                            ? Colors.white
                                            : Colors.black),
                                    onTap: () {
                                      //woz = true;
                                      events.add({"${leo}":"Cleared search~${titleController.text}"});
                          

                                      titleController.clear();
                                      titleController.text = '';
                                     // print('was here');
                                    },
                                  )
                                : Container(),
                            filled: true,
                            fillColor:
                                darkmode ? Colors.white : Colors.grey.shade800,
                            //fillColor: Colors.white,
                            border: OutlineInputBorder(
                             
                                borderRadius: BorderRadius.circular(60.0)),
                            //labelText: 'Search',
                            hintText: 'Type to Search and see suggestions'),
                            
                      ),
                    ),
                  )),
              const ListTile(

                  //leading: Icon(Icons.location_pin),
                  //title: const Text("My delivery Address"),
                  ),
              ListTile(
                title: Text("",
                    style: GoogleFonts.lato(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                        color: Colors.black)),
                onTap: () {
                  ;
                  //get out of my app
                },
              ),
            ]),
          );
        });
  }

  var week_area;
  bool pressedCart = true;
  var wild;
  var wild2;
  late var titleController4 = TextEditingController();

  Future getWeather() async {
    MpesaFlutterPlugin.setConsumerKey('rjDWHXkZ3RX5Gy4xDvNztA6ARJQo6gQx');
    MpesaFlutterPlugin.setConsumerSecret('kL2L4KMvGhZDqIZn');

    String token = widget.token;
    //http://192.168.100.18:8000/restaurant/ http://172.16.12.17:8000/
    print('rono' + token);
    //print(widget.token); wasn't easy but never stopped
    var headers = {
      'Authorization': 'Token ${token}',
    };
    http.Response responsev = await http.get(
        Uri.parse('http://192.168.100.18:8000/restaurant/1/'),// + widget.title),
        headers: headers);
    http.Response responsev2 = await http.get(
        Uri.parse('http://192.168.100.18:8000/information/'),// + widget.title),
        headers: headers);    
    http.Response picpic1 = await http
        .get(Uri.parse('http://192.168.100.18:8000/profpic/'), headers: headers);
    var results = jsonDecode(responsev.body);
    var picpic = jsonDecode(picpic1.body);
    var info1=jsonDecode(responsev2.body);
    setState(() {
      this.sky = results;
      this.picpic = picpic;
      this.information = info1;
      /*[{name: bevarage, caption: hot sweet drinks ... you'll come back for more, food: [{name: vanilla latte, price: 250}, {name: Chips, price: 100}, {name: burger, price: 150}, {name: black coffee, price: 100}, {name: capucchino, price: 150}, {name: esspreso, price: 100}]}, {name: fastfood&drinks, caption: delicacies ... you'll come back for more, food: [{name: vanilla latte, price: 250}, {name: Chips, price: 100}, {name: burger, price: 150}, {name: black coffee, price: 100}, {name: capucchino, price: 150}, {name: esspreso, price: 100}, {name: croissant, price: 250}, {name: blackforrest, price: 250}, {name: red velvet, price: 250}, 
{name: Pilau, price: 100}]}]
*/
      //sky['menu'][0]['menu'] -this is the menu
      //sky['menu'][0]['menu'][0]['name'] this is the categries
      print(sky);
    });
    setState(() {
      //DateFormat('EEEE').format(date);
      this.week_area = DateFormat('dd MMM').format(DateTime.now());
      this.leo = DateFormat.jm().format(DateTime.now());
      this.now = DateFormat('EEEE dd MMM')
          .format(DateTime.now()); //returns json body from api
      print(leo);
      //this.courseblock = result1;
    });
  }

  Widget spacer() {
    return Container(
      width: 5.0,
    );
  }

  Widget line() {
    return Container(
      decoration: BoxDecoration(
          color: Colors.grey.withOpacity(0.4),
          borderRadius: const BorderRadius.all(
              Radius.circular(10.0) //                 <--- border radius here
              )),
      height: 5.0,
      width: 50.0,
    );
  }

  List<List> cart = [];
  List amount = [];
  var quantity;
  List<List> cart2 = [];
  List amount2 = [];
  List amount3 = [];
  var food2;
  var mpesanumber;
  var food7;
  bool address = false;
  var quantity2;
  bool softkey = false;
  void _increase(var i) {
    final prev = ii;
    ii = i;
    if (prev != ii) {
      quantity = 1;
    }
    quantity++;
  }

  bool settings = false;
  bool legal = true;

  void showPlacePicker() async {
   // LocationResult? result = await Navigator.of(context).push(MaterialPageRoute(
  //      builder: (context) =>
//            PlacePicker("AIzaSyA7fRUg_vYd8Q3lxCiGo9IKsIIVgrAT564")));

    // Handle the result in your way
    //print(result);F
    setState(() {
     // wild = result?.name;
      //wild2 = result?.latLng;
    });
    //this.wild = result?.name;
    //print(wild);
    // Navigator.pop(context);
    //Navigator.pop(context);
  }

  Future<void> scanQR() async {
    String barcodeScanRes;
    // Platform messages may fail, so we use a try/catch PlatformException.

    barcodeScanRes = await FlutterBarcodeScanner.scanBarcode(
        '#ff6666', 'Cancel', true, ScanMode.QR);
    print(barcodeScanRes);

    //here's  functs
    //final _controller = ScrollController();

    void senE(BuildContext context) {
      showDialog(
        context: context,
        builder: (context) => const AlertDialog(
          title: Text("Invalid "),
          content: const Text("Didn't get the qrcode"),
        ),
      );
    }

    String _scanBarcode = 'Unknown';

    //add the http request here

    setState(() {
      _scanBarcode = barcodeScanRes;
      print(_scanBarcode.toString());
      final id = _scanBarcode.length;
      print(barcodeScanRes.substring(2, id));
      //this.getScan(_scanBarcode.toString());
    });
    //if (barcodeScanRes != true) return _launchURL(_scanBarcode.toString());

    if (barcodeScanRes.toString() != '-1' &&
        barcodeScanRes.toString().split('|')[0] == "AfleetUser") {
      print(barcodeScanRes.length);
      FlutterBeep.beep();
      Navigator.pop(
        context,
      );
      //following functions pushes collected data  to the api
      // getScan(barcodeScanRes.toString());
      //getScan2(barcodeScanRes.toString());
    } else {
      senE(context);
    }
  }

  Future addtocart() async {
    String token = widget.token;
    var headers = {
      'Authorization': 'Token ${token}',
    };
    http.Response responsex =
        await http.post(Uri.parse('http://172.16.12.17:8000/cart/'),
            headers: {
              'Content-Type': 'application/json; charset=UTF-8',
              'Authorization': 'Token $token',
            },
            body: jsonEncode(<String, String>{
              'count': quantity.toString(),
              'food': amount2.toString(), //list for food
              //'customer':now.toString()+'\t ,'+leo.toString(),
            }));
  }

  Future addtomatukio() async {
    String token = widget.token;
    var headers = {
      'Authorization': 'Token ${token}',
    };
    http.Response responsex =
        await http.post(Uri.parse('http://192.168.100.18:8000/matukios/'),
            headers: {
              'Content-Type': 'application/json; charset=UTF-8',
              'Authorization': 'Token $token',
            },
            body: jsonEncode(<String, String>{
             
              'username': widget.me.toString(),
              'datetime': now.toString(), //${_tabTimes[0] } ${_tabTimes[1] } ${_tabTimes[2] } ${_tabTimes[3] } ${_tabTimes[4] } ${_tabTimes[5] }
              'sessiontime': [{"foryou":"${_tabTimes[0] }"},{"page1":"${_tabTimes[1] }"},{"page2":"${_tabTimes[2] }"},{"page3":"${_tabTimes[3] }"},{"page4":"${_tabTimes[4] }"},{"page5":"${_tabTimes[5] }"}].toString(),
              'event': events.toString(),
              'device': "Android",//quantity.toString(),
              'geolocation': "${widget.geolocation}"//amount2.toString(), //list for food
              //'customer':now.toString()+'\t ,'+leo.toString(),
            }));
          }

  Future addata(String otype, String zum, String otime, String oname) async {
    String token = widget.token;
    //print('ruined sum' + zum.toString());
    //print('rono' + token);
    //print(widget.token); wasn't easy but never stopped
    var headers = {
      'Authorization': 'Token ${token}',
    };
    http.Response responsev =
        await http.post(Uri.parse('http://192.168.100.18:8000/orderff/'),
            headers: {
              'Content-Type': 'application/json; charset=UTF-8',
              'Authorization': 'Token $token',
            },
            body: jsonEncode(<String, String>{
              'table': widget.user.toString(),
              'food': '${amount2.toString()}', //list for food
              'restaurantx': sky['username'].toString(),
              'time': now.toString() + '\t ,' + leo.toString(),
              'owner': widget.me.toString(),

              'totalprice': zum.toString(),
              'ordertype': otype.toString(),
              'ordername': oname.toString(),
              'ordertrak': 'not ready',
              'ordertime': otime.toString(),
              //'customer':now.toString()+'\t ,'+leo.toString(),
            }));
    //returns json body from api
    //var resultsX = jsonDecode(responsevX.body); //returns json body from api
  }

  Future getfood() async {
    String token = widget.token.toString();
    //String id = widget.userid.toString();

    //print(widget.token); wasn't easy but never stopped
    var headers = {
      'Authorization': 'Token $token',
    };
    http.Response responsev = await http
        .get(Uri.parse('http://192.168.100.18:8000/foodff/'), headers: headers);
    http.Response responsej = await http
        .get(Uri.parse('http://192.168.100.18:8000/orderff/'), headers: headers);    
    var xcv = jsonDecode(responsev.body);
     var xcv2 = jsonDecode(responsej.body);
    setState(() {
      food7 = xcv;
      food2 = xcv2;
    });
    
  }

  Future getWealth() async {
    String token = widget.token.toString();
    //String id = widget.userid.toString();

    //print(widget.token); wasn't easy but never stopped
    var headers = {
      'Authorization': 'Token $token',
    };
    raw() async {
      final SharedPreferences sharedPreferences =
          await SharedPreferences.getInstance();
      sharedPreferences.setBool('darkmode', darkmode);
      sharedPreferences.setBool('salenote', salenote);
      sharedPreferences.setString('lang2', lang2);

      sharedPreferences.setString('sky', json.encode(sky));
      sharedPreferences.setString('food2', json.encode(food2));
      sharedPreferences.setString('infomation', json.encode(information));
      sharedPreferences.setString('food7', json.encode(food7));
      sharedPreferences.setString('cart', json.encode(cart));
      sharedPreferences.setString('wild', json.encode(wild));
      sharedPreferences.setString('wild2', json.encode(wild2));
      
      //sharedPreferences.setString('titleController4', json.encode(titleController4));
    }

    ;
    //raw();
    
      //food2 = xcv;
      raw();
    
    //print(food1);
  }

  Future getWealth2() async {
    String token = widget.token.toString();
    //String id = widget.userid.toString();

    //print(widget.token); wasn't easy but never stopped
    var headers = {
      'Authorization': 'Token $token',
    };
    http.Response responsev = await http
        .get(Uri.parse('http://192.168.100.18:8000/orderff/'), headers: headers);
    var xcv = jsonDecode(responsev.body);
    http.Response response2 = await http
        .get(Uri.parse('http://192.168.100.18:8000/information/'), headers: headers);
    var xcv2 = jsonDecode(responsev.body);

    ;
    //raw();
   setState((){
    food2 = xcv;
    information = xcv2;  
   });
      
  
    //print(food1);
  }

  

  Future createAlbumx(
      String sender, String message_me, String receiver, String time) async {
    //print(utf8.encode(titleController.text));
    http.Response response1 = await http.post(
      Uri.parse('http://192.168.100.18:8000/chatff/'),
      headers: <String, String>{
        'Content-Type': 'application/json; charset=UTF-8',
      }, //'id','sender','message_me','receiver','time'
      body: jsonEncode(<String, String>{
        //'id': titleController.text,this is an autofield
        'name': 'Groupbuy', //groupbuy
        'sender': sender, //widget.me.toString(), //you
        'message_me':
            message_me, //'${amount2.toString()}', //ie '2/rono|re|amount|3
        'receiver': receiver,
        //widget.user.split('|')[0].split('/')[1].toString(), //parent user
        'time': time
        //now.toString() + '|' + leo.toString(),
      }),
    );
    //print(jsonDecode(response1.data.toString()) );
    //works => print(token['token']);

    if (response1.statusCode == 201) {
      print("yea it happened");
      print(jsonDecode(response1.body.toString()));
    }
  }

  void decrease(String i) {
    final prev = ii;
    ii = i;
    if (prev != ii) {
      quantity = 1;
    }
    quantity--;
  }

  String ii = '1';
  orderzangu() {
    var counter = 30;
    Timer.periodic(Duration(seconds: int.parse(generateRandomString3(2))),
        (timer) {
      //http req to  and from server
      counter++;

      if (counter == 0) {
        counter = 15;
        print('Cancel timer');
        timer.cancel();
      } else {
        salenote ? '' : retball();
      }
      ;
    });
  }
  raw() async {
        final SharedPreferences sharedPreferences =
            await SharedPreferences.getInstance();

        sharedPreferences.setString('food2', json.encode(food2));
        sharedPreferences.setBool('darkmode', darkmode);
        sharedPreferences.setBool('salenote', salenote);
        sharedPreferences.setString('lang2', lang2);
        sharedPreferences.setString('information', information);

        sharedPreferences.setString('sky', json.encode(sky));
        sharedPreferences.setString('food2', json.encode(food2));
        sharedPreferences.setString('food7', json.encode(food7));
        sharedPreferences.setString('cart', json.encode(cart));
        sharedPreferences.setString('wild', json.encode(wild));
        sharedPreferences.setString('wild2', json.encode(wild2));
        
        //sharedPreferences.setString('now', json.encode(now));
      }
onoop() async {
    final SharedPreferences sharedPreferences =
        await SharedPreferences.getInstance();
/*
sharedPreferences.setString('yoi', yoi.toString());
    //value3 == null && value == null
    sharedPreferences.setString('this2', this2.toString());
    sharedPreferences.setString('info3', info3.toString());
    sharedPreferences.setString('profpic', profpic.toString());
    //value3 == null && value == null
    sharedPreferences.setString('alone', alone.toString());
*/
    var mode = sharedPreferences.getBool('darkmode'); //
    var o6 = sharedPreferences.getBool('salenote');
    //var o2 = jsonDecode(sharedPreferences.getString('information')!);
    var o3 = jsonDecode(sharedPreferences.getString('food2')!);
    var o4 = jsonDecode(sharedPreferences.getString('food7')!);
    //var o5 = jsonDecode(sharedPreferences.getString('sky'));
    //var o6 = jsonDecode(sharedPreferences.getString('salenote'));
    var o7 = jsonDecode(sharedPreferences.getString('wild')!);

    var o8 = jsonDecode(sharedPreferences.getString('wild2')!);
    var o9 = sharedPreferences.getString('lang2');
    //var oo = jsonDecode(sharedPreferences.get('sky2'));
    // = jsonDecode(
    //cart = o2; //jsonDecode(o2);

    setState(() {
      food2 = o3; //jsonDecode(o3);
      food7 = o4;
      lang2 = o9;
      darkmode = mode!;
      salenote = o6!;
      //information = o2;
      //sky = o5;
      //titleController4 = o6;
      wild = o7;
      wild2 = o8;
      Color scaffold1 = darkmode ? Colors.black : Colors.white;
    Color text1 = darkmode ? Colors.white : Colors.black;
    Color icon1 = darkmode ? Colors.grey : Colors.grey.shade700;
    print(darkmode);
    print(food2);
    });
    //this.press = o9;
    //this.sky2 = oo;
  }
  late TabController _tabController;
  List<int> _tabTimes = [0, 0, 0,0,0,0,0,0,0,0]; // Store time spent on each tab in seconds
  int _currentTabIndex = 0;
  DateTime? _entryTime;
  DateTime? _exitTime;
  DateTime? _tabEnteredTime;
  @override
  void initState() {
    //_entryTime = DateTime.now();

    events.add({"${DateFormat.jm().format(DateTime.now())}":"${widget.title == "newuser"?"Opened app":"return entry"}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    _tabController = TabController(length:  10, vsync: this);
    onoop();
    
    orderzangu();
    getWealth2();
    

    getfood();
   

    //flutterToast = flutterToast!;
    getWeather();

    _bannerAd = BannerAd(
      adUnitId: AdHelper.bannerAdUnitId,
      request: const AdRequest(),
      size: AdSize.banner,
      listener: BannerAdListener(
        onAdLoaded: (_) {
          setState(() {
            _isBannerAdReady = true;
          });
        },
        onAdFailedToLoad: (ad, err) {
          print('Failed to load a banner ad: ${err.message}');
          _isBannerAdReady = false;
          ad.dispose();
        },
      ),
    );
  //_checkThemeMode();
    //_bannerAd * sky3.length;
    _bannerAd.dispose();
    _bannerAd.load();
    _controllerTopCenter =
        ConfettiController(duration: const Duration(seconds: 10));
    widget.title != "newuser"//"newuser",
        ? ""
        :  true
            ? Future.delayed(const Duration(seconds: 5)).then((_) {
               
                        showModalBottomSheet(
                                backgroundColor: Colors.transparent,
                                context: context,
                                isScrollControlled: true,
                                builder: (context) {
                                  return Scaffold(
                                    backgroundColor: Colors.transparent,
                                    body: Center(
                                      child: Column(
                                        mainAxisAlignment: MainAxisAlignment.center,
                                        children: [
                                         SizedBox(height:150),
                                         Container(
                                            decoration: BoxDecoration(
                                                color: Colors.grey.shade900,
                                                borderRadius: const BorderRadius.only(
                                                    topRight: Radius.circular(20.0),
                                                    topLeft: Radius.circular(20.0),
                                                    bottomLeft:
                                                        Radius.circular(20.0),
                                                    bottomRight:
                                                        Radius.circular(20.0))),
                                            height: 500,
                                            width: 320,
                                            //         color:Colors.grey.shade900,
                                           // padding: const EdgeInsets.all(20.0),
                                            child: Column(
                                              children: [
                                                 Container(
                                                  padding:EdgeInsets.all(20.0),
                                            decoration: BoxDecoration(
                                              //  color: Colors.grey.shade900,
                                                 image: DecorationImage(image: AssetImage("assets/freshfitposter.png"),fit:BoxFit.cover),
                                              
                                                borderRadius: const BorderRadius.only(
                                                    topRight: Radius.circular(20.0),
                                                    topLeft: Radius.circular(20.0),
                                                    bottomLeft:
                                                        Radius.circular(0.0),
                                                    bottomRight:
                                                        Radius.circular(0.0))),
                                            height: 240,//MediaQuery.of(context).size.height,
                                            width: 320,//MediaQuery.of(context).size.width,),
                                          ),
                                                ListTile(
                                                  title: Center(
                                                    child: Text(
                                                      "Learn the basics",
                                                      style: GoogleFonts.montserrat(
                                                        fontWeight: FontWeight.bold,
                                                        color: Colors.white,
                                                        fontSize: 17,
                                                      ),
                                                    ),
                                                  ),
                                                  
                                                ),
                                                Padding(
                                                  padding:
                                                      const EdgeInsets.all(8.0),
                                                  child: Center(
                                                    child: Card(
                                                        elevation: 0,
                                                        color: Colors.transparent,
                                                        child: Row(
                                                          mainAxisAlignment: MainAxisAlignment.center,
                                                          children: [
                                                          InkWell(
                                                            onTap: () {
                                                              setState(() {
                                                             isTutorialenabled = true;
                                                             events.add({"${leo}":"Agreed to the tutorial|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                  
                                                             Navigator.pop(context);
                                                                
                                                              });
                                                            },
                                                            child: Center(
                                                              child: Container(
                                                                height: 60,
                                                                width: 250,
                                                                decoration: BoxDecoration(
                                                                    color: Colors.grey
                                                                        .shade800,
                                                                    borderRadius: const BorderRadius.only(
                                                                        topRight: Radius
                                                                            .circular(
                                                                                20.0),
                                                                        topLeft: Radius
                                                                            .circular(
                                                                                20.0),
                                                                        bottomLeft: Radius
                                                                            .circular(
                                                                                20.0),
                                                                        bottomRight: Radius
                                                                            .circular(
                                                                                20.0))),
                                                                child: Center(
                                                                  child: Wrap(
                                                                      alignment:
                                                                          WrapAlignment
                                                                              .start,
                                                                      children: [
                                                                        Padding(
                                                                          padding:
                                                                              const EdgeInsets.all(
                                                                                  8.0),
                                                                          child: Row(
                                                                            mainAxisAlignment:
                                                                                MainAxisAlignment
                                                                                    .spaceEvenly,
                                                                            children: [
                                                                              Text(
                                                                                "Proceed",
                                                                                style:
                                                                                    GoogleFonts.montserrat(
                                                                                  fontWeight:
                                                                                      FontWeight.w500,
                                                                                  color:
                                                                                      Colors.white,
                                                                                  fontSize:
                                                                                      17,
                                                                                ),
                                                                              ),
                                                                            ],
                                                                          ),
                                                                        ),
                                                                      ]),
                                                                ),
                                                              ),
                                                            ),
                                                          ),
                                                        ])),
                                                  ),
                                                ),
                                                Padding(
                                                  padding:
                                                      const EdgeInsets.all(8.0),
                                                  child: Center(
                                                    child: Card(
                                                        elevation: 0,
                                                        color: Colors.transparent,
                                                        child: Row(
                                                          mainAxisAlignment: MainAxisAlignment.center,
                                                          children: [
                                                          InkWell(
                                                            onTap: () {
                                                              Navigator.pop(
                                                                  context);
                                                                  events.add({"${leo}":"Disagreed to the tutorial|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                              /*  Navigator.push(
                                                                              context,
                                                                              MaterialPageRoute(
                                            builder: (context) => ChatScreenfteacher(
                                               pic_url: widget.pic_url,
                                                                            username: widget.username,
                                                                            information: widget.information,
                                                                            token: widget.token,
                                            )));*/
                                                            },
                                                            child: Container(
                                                              height: 60,
                                                              width: 250,
                                                              decoration: BoxDecoration(
                                                                  color: Colors
                                                                      .red.shade900
                                                                      .withOpacity(
                                                                          0.1),
                                                                  borderRadius: const BorderRadius.only(
                                                                      topRight: Radius
                                                                          .circular(
                                                                              20.0),
                                                                      topLeft: Radius
                                                                          .circular(
                                                                              20.0),
                                                                      bottomLeft:
                                                                          Radius.circular(
                                                                              20.0),
                                                                      bottomRight:
                                                                          Radius.circular(
                                                                              20.0))),
                                                              child: Center(
                                                                child: Wrap(
                                                                    alignment:
                                                                        WrapAlignment
                                                                            .start,
                                                                    children: [
                                                                      Padding(
                                                                        padding:
                                                                            const EdgeInsets.all(
                                                                                8.0),
                                                                        child: Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment
                                                                                  .spaceEvenly,
                                                                          children: [
                                                                            Text(
                                                                              "Skip",
                                                                              style:
                                                                                  GoogleFonts.montserrat(
                                                                                fontWeight:
                                                                                    FontWeight.w500,
                                                                                color:
                                                                                    Colors.white,
                                                                                fontSize:
                                                                                    17,
                                                                              ),
                                                                            ),
                                                                          ],
                                                                        ),
                                                                      ),
                                                                    ]),
                                                              ),
                                                            ),
                                                          ),
                                                        ])),
                                                  ),
                                                ),
                                              ],
                                            ),
                                          ),
                                        ],
                                      ),
                                    ),
                                    bottomNavigationBar: Container(
                                      height: 150,
                                      color: Colors.transparent,
                                    ),
                                  );
                                });
                   
                })
            : "";
   
    _tabController.addListener(_handleTabSelection);
    _tabEnteredTime = DateTime.now();
    super.initState();
   // _tabController = TabController(length: sky['menu'][0]['menu'].length + 1, vsync: this);
    
    
    
    
    
    //var initializationSettingsAndroid = new AndroidInitializationSettings('@mipmap/ic_launcher');
  }
  void _checkThemeMode() {
    setState(() {
      darkmode = MediaQuery.of(context).platformBrightness == Brightness.dark;
    });
  }
  void _handleTabSelection() {
    if (_tabController.indexIsChanging) {
      _updateTabTime(_currentTabIndex);
      _currentTabIndex = _tabController.index;
      _tabEnteredTime = DateTime.now();
    }
  }

  void _updateTabTime(int tabIndex) {
    if (_tabEnteredTime != null) {
      int secondsSpent = DateTime.now().difference(_tabEnteredTime!).inSeconds;
      setState(() {
        _tabTimes[tabIndex] += secondsSpent;
      });
    }
  }
  @override
  void dispose() {
    //raw();
    events.add({"${leo}":"exited app|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
    getWealth()




    ;
    addtomatukio();
    _updateTabTime(_currentTabIndex);
    _tabController.dispose();
    _controllerTopCenter.dispose();
    super.dispose();
  }
// int curPage;
  @override
  Widget build(BuildContext context) {
  //_tabController = TabController(length: 10, vsync: this);
     setState(() {
                                                    now = DateFormat('EEEE dd MMM')
                                                        .format(DateTime.now());
                                                    //returns json body from api
                                                    //this.courseblock = result1;
                                                    leo = DateFormat.jm()
                                                        .format(DateTime.now());
                                                        _tabTimes[0];_tabTimes[1];_tabTimes[2];_tabTimes[3];_tabTimes[4];_tabTimes[5];
                                                    _currentTabIndex = _tabController.index;

                                                  });
                                                  
    Color scaffold1 = darkmode ? Colors.black : Colors.white;
    Color text1 = darkmode ? Colors.white : Colors.black;
    Color icon1 = darkmode ? Colors.grey : Colors.grey.shade700;
    //overlaycounter == 1?_controllerTopCenter.play():"";
  
   // raw();
    
    //onoop();
    //_tabController  events.add({"${leo}":"Clicked on changing profile picture"});
    getWealth();
    
    String works = '';
    
    KeyboardVisibilityController().onChange.listen((event) {
      setState(() {
        softkey = event;
        if (softkey == true) {
          works = 'ollo';
        }
        ;
      });

      print("THE KEYBOARD" + softkey.toString());
    });

    num sum = 0;
    for (num e in amount) {
      sum += e;
      print(sum);
      //sumx = sum;
    }

    //final sum = amount.sum;
    //var _scaffoldKey;

    final GlobalKey<ScaffoldState> _scaffoldKey = GlobalKey(); // Create a key
   // overlaycounter == 4 ?   Scaffold.of(context).openDrawer():"";
    return sky != null
        ? WillPopScope(
            onWillPop: () => Future.value(false),
            child:  OverlayTutorialScope(
              enabled: isTutorialenabled,
              overlayColor: Colors.green.withOpacity(.2),
              // Disable all the widgets. All the widgets are now non-interactive.
              child: Stack(
                children: [
                  Scaffold(
                                     // key: _scaffoldKey,
                                      backgroundColor: scaffold1,
                                      body:  DefaultTabController(
                                        
                                              length: sky['menu'][0]['menu'].length + 1,
                                              child: Scaffold(
                                                
                                                  //key: _scaffoldKey,
                                                  backgroundColor: scaffold1,
                                                  drawer: 
                                                  Drawer(
                                                      //isScrollControlled: true,
                                    
                                                      child:  Scaffold(
                                                                                              extendBody: true,
                                                                                                                                backgroundColor: darkmode?Colors.grey.shade900:Colors.white,
                                                                                                                                appBar: PreferredSize(
                                                                                            preferredSize:
                                                                                                MediaQuery.of(context).size.height > 700
                                                                                                    ? Size.fromHeight(
                                                                                                        MediaQuery.of(context).size.height *
                                                                                                            .18)
                                                                                                    : Size.fromHeight(
                                                                                                        MediaQuery.of(context).size.height *
                                                                                                            .4250959),
                                                                                            child: Container(
                                                                                              color: darkmode?Colors.grey.shade900:Colors.white,
                                                                                              padding: const EdgeInsets.all(10.0),
                                                                                              child: Column(children: [
                                                                                                Container(
                                                                                                  height: MediaQuery.of(context)
                                                                                                          .size
                                                                                                          .height *
                                                                                                      .05,
                                                                                                ),
                                                                                                SizedBox(
                                                                                                  height:50,
                                                                                                  child: ListTile(title:
                                                                                                  Row(
                                                                                                    mainAxisAlignment:MainAxisAlignment.spaceBetween,
                                                                                                    children: [
                                                                                                    //Container(width: 14),
                                                                                                    Stack(children: [
                                                                                                      InkWell(
                                                                                                        onTap: () {
                                                                                                          Navigator.push(
                                                                                                            context,
                                                                                                            MaterialPageRoute(
                                                                                                                builder: (context) =>
                                                                                                                    chang(
                                                                                                                      username:
                                                                                                                          "${widget.me}",
                                                                                                                      mode: darkmode,
                                                                                                                      lang2: lang2,
                                                                                                                    )
                                                                                                                //screen(),
                                                                                                                ), //MaterialPageRoute
                                                                                                          );
                                                                                                          events.add({"${leo}":"Clicked on changing profile picture|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                        },
                                                                                                        child: OverlayTutorialHole(
                                                                                                                        enabled: overlaycounter == 8 ? true : false,
                                                                                                                        overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                          padding: const EdgeInsets.all( 20.0),
                                                                                                                          radius: const Radius.circular(25.0),
                                                                                                                          overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                            OverlayTutorialWidgetHint(
                                                                                                                              position: (rect) => Offset(-1.0, rect.height),
                                                                                                                              builder: (context, entryRect) {
                                                                                                                                return Center(
                                                                                                                                  child: GestureDetector(
                                                                                                                                    onTap: () {
                                                                                                                                      setState(() {
                                                                                                                                        overlaycounter++;
                                                                                                                                        audioCache
                                                                                                    .play(AssetSource("notific.mp3"));
                                                                                                                                      });
                                                                                                                                    },
                                                                                                                                    child: const tut5(),
                                                                                                                                  ),
                                                                                                                                );
                                                                                                                              },
                                                                                                                            ),
                                                                                                                          ],
                                                                                                                        ),
                                                                                                                        child: CircleAvatar(
                                                                                                              radius: 22,
                                                                                                              child: Stack(children: [
                                                                                                                Center(
                                                                                                                  child: Text(
                                                                                                                      "${widget.firstname.substring(0, 1)}",
                                                                                                                      style: GoogleFonts.lato(
                                                                                                                          fontWeight:
                                                                                                                              FontWeight
                                                                                                                                  .bold)),
                                                                                                                ),
                                                                                                                ...picpic
                                                                                                                    .where((c) =>
                                                                                                                        c['username1'] ==
                                                                                                                        "${widget.me}")
                                                                                                                    .map((ui) =>
                                                                                                                        CircleAvatar(
                                                                                                                          radius: 22,
                                                                                                                          backgroundColor:
                                                                                                                              Colors
                                                                                                                                  .transparent,
                                                                                                                              
                                                                                                                          backgroundImage:
                                                                                                                              NetworkImage(
                                                                                                                            ui['image'],
                                                                                                                          ), //ui['image'],
                                                                                                                        )),
                                                                                                              ])),
                                                                                                        ),
                                                                                                      ),
                                                                                                      Positioned(
                                                                                                        bottom: 2,
                                                                                                        right: 1,
                                                                                                        child: CircleAvatar(
                                                                                                            backgroundColor: darkmode?Colors.grey.shade900:Colors.white,
                                                                                                            radius: 5,
                                                                                                            child: const Icon(
                                                                                                                Icons.camera_alt,
                                                                                                                color:  Colors.grey,
                                                                                                                size: 7)),
                                                                                                      )
                                                                                                    ])
                                                                                                  , PopupMenuButton<String>(
                                                                                                                        elevation: 0.0,
                                                                                                                          color: Colors.transparent,
                                                                                                                          child:
                                                                                                                           const Icon(Icons.info_outline,
                                                                                                                                                                                           color: Colors.green),
                                                                                                                          onSelected: (String result) {
                                                                                                                            setState(() {
                                                                                                                                                                                          // Handle result from pop-up menu
                                                                                                                            });
                                                                                                                          },
                                                                                                                          itemBuilder: (BuildContext context) =>
                                                                                                                                                                                          <PopupMenuEntry<String>>[
                                                                                                                                                                                            PopupMenuItem<String>(
                                                                                                                                                                                              padding: const EdgeInsets.all(25.0),
                                                                                                                                                                                              // offset:Offset.fromDirection(-20.0),
                                                                                                                                                                                              value: 'switch account',
                                                                                                                                                                                              child: Container(
                                                                                                                                                                                               // width:550,
                                                                                                                                                                                                padding: const EdgeInsets.all(15.0),
                                                                                                                                                                                                decoration: BoxDecoration(
                                                                                                                                                                                                  borderRadius:
                                                                                                                                                                                                      BorderRadius.circular(20),
                                                                                                                                                                                                  color: 0==0
                                                                                                                                                                                                      ? Colors.blueGrey.shade900
                                                                                                                                                                                                      : Colors.blueGrey.shade100,
                                                                                                                                                                                                ),
                                                                                                                                                                                                //x["skills"] .toString().replaceAll("[","").replaceAll("]","").split(",")
                                                                                                                                                                                                // height: 200,
                                                                                                                                                                                                width: MediaQuery.of(context).size.width,
                                                                                                                                                                                                child: Center(
                                                                                                                                                                                                  child: Column(
                                                                                                                                                                                                    children: [
                                                                                                                                                                                                      
                                                                                                                                                                                                      ListTile(
                                                                                                                                                                                                        title:Text(lang2 == "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                          ?"Je, unataka kujua jinsi hii inavyofanya kazi?":"Hey, wanna know how this works?",style: GoogleFonts.lato(
                                                                                                                                                                                                          fontSize: 20,
                                                                                                                                                                                                          fontWeight: FontWeight.bold,
                                                                                                                                                                                                          color: Colors.white),
                                                                                                                                                                                                          textAlign: TextAlign.center,
                                                                                                                                                                                                          )
                                                                                                                                                                                                      ),
                                                                                                                                                                                                  
                                                                                                                                                                                                      GestureDetector(
                                                                                                                                                                                                        onTap: () {
                                                                                                                                                                                                          setState((){
                                                                                                                                                                                                            isTutorialenabled=true;
                                                                                                                                                                                                            overlaycounter=7;
                                                                                                                                                                                                            Navigator.pop(context);
                                                                                                                                                                                                            events.add({"${leo}":"Agreed to the tutorial on drawer|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                          });
                                                                                                                                                                                                          /*Navigator.push(
                                                                                                                                                                                                            //intrpage
                                                                                                                                                                                                            context,
                                                                                                                                                                                                            MaterialPageRoute(
                                                                                                                                                                                                                builder: (context) =>
                                                                                                                                                                                                                     MyAppL(
                                                                                                                                                                                                                      title:
                                                                                                                                                                                                                          'addaccount',
                                                                                                                                                                                                                          username1: "${sky2["username"]}|${widget.token}|${widget.userid}"
                                                                                                                                                                                                                     
                                                                                                                                                                                                                    ) //screen(),
                                                                                                                                                                                                                ), //MaterialPageRoute
                                                                                                                                                                                                          );*/
                                                                                                                                                                                                        },
                                                                                                                                                                                                        child: ListTile(
                                                                                                                                                                                                            
                                                                                                                                                                                                            title: Container(
                                                                                                                                                                                                              height:50,
                                                                                                                                                                                                              width: MediaQuery.of(context).size.width*.8,
                                                                                                                                                                                                              decoration: BoxDecoration(
                                                                                                                                                                                                                color: Colors.green.withOpacity(0.8),
                                                                                                                                                                                                                borderRadius: const BorderRadius.only(
                                                                                                                                                                                                                  topLeft: Radius.circular(20.0),
                                                                                                                                                                                                                  topRight: Radius.circular(20.0),
                                                                                                                                                                                                                  bottomLeft: Radius.circular(20.0),
                                                                                                                                                                                                                  bottomRight: Radius.circular(20.0),
                                                                                                                                                                                                                ),
                                                                                                                                                                                                                boxShadow: [
                                                                                                                                                                                                                  BoxShadow(
                                                                                                                                                                                                                    color: Colors.grey.withOpacity(0),
                                                                                                                                                                                                                    spreadRadius: 0,
                                                                                                                                                                                                                    blurRadius: 0,
                                                                                                                                                                                                                  )
                                                                                                                                                                                                                ],
                                                                                                                                                                                                              ),
                                                                                                                                                                                                              child:Center(child: Text("Yes",style: GoogleFonts
                                                                                                                                                                                                                  .montserrat(
                                                                                                                                                                                                                      fontSize: 15,
                                                                                                                                                                                                                      fontWeight:
                                                                                                                                                                                                                          FontWeight
                                                                                                                                                                                                                              .normal,
                                                                                                                                                                                                                      color:
                                                                                                                                                                                                                          text1),),)
                                                                                                                                                                                                              )),
                                                                                                                                                                                                      ),
                                                                                                                                                                                                      GestureDetector(
                                                                                                                                                                                                        onTap: () {
                                                                                                                                                                                                          Navigator.pop(context);
                                                                                                                                                                                                          events.add({"${leo}":"Disagreed to the drawer tutorial|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                          /*Navigator.push(
                                                                                                                                                                                                            //intrpage
                                                                                                                                                                                                            context,
                                                                                                                                                                                                            MaterialPageRoute(
                                                                                                                                                                                                                builder: (context) =>
                                                                                                                                                                                                                     MyAppL(
                                                                                                                                                                                                                      title:
                                                                                                                                                                                                                          'addaccount',
                                                                                                                                                                                                                          username1: "${sky2["username"]}|${widget.token}|${widget.userid}"
                                                                                                                                                                                                                     
                                                                                                                                                                                                                    ) //screen(),
                                                                                                                                                                                                                ), //MaterialPageRoute
                                                                                                                                                                                                          );*/
                                                                                                                                                                                                        },
                                                                                                                                                                                                        child: ListTile(
                                                                                                                                                                                                           
                                                                                                                                                                                                            title: Container(
                                                                                                                                                                                                              height:30,
                                                                                                                                                                                                              width: MediaQuery.of(context).size.width*.8,
                                                                                                                                                                                                              decoration: BoxDecoration(
                                                                                                                                                                                                                color: Colors.transparent,
                                                                                                                                                                                                                borderRadius: const BorderRadius.only(
                                                                                                                                                                                                                  topLeft: Radius.circular(20.0),
                                                                                                                                                                                                                  topRight: Radius.circular(20.0),
                                                                                                                                                                                                                  bottomLeft: Radius.circular(20.0),
                                                                                                                                                                                                                  bottomRight: Radius.circular(20.0),
                                                                                                                                                                                                                ),
                                                                                                                                                                                                                boxShadow: [
                                                                                                                                                                                                                  BoxShadow(
                                                                                                                                                                                                                    color: Colors.grey.withOpacity(0),
                                                                                                                                                                                                                    spreadRadius: 0,
                                                                                                                                                                                                                    blurRadius: 0,
                                                                                                                                                                                                                  )
                                                                                                                                                                                                                ],
                                                                                                                                                                                                              ),
                                                                                                                                                                                                              child:Center(child: Text("pass",style: GoogleFonts
                                                                                                                                                                                                                  .montserrat(
                                                                                                                                                                                                                      fontSize: 15,
                                                                                                                                                                                                                      fontWeight:
                                                                                                                                                                                                                          FontWeight
                                                                                                                                                                                                                              .normal,
                                                                                                                                                                                                                      color:
                                                                                                                                                                                                                          Colors.redAccent),),)
                                                                                                                                                                                                              )),
                                                                                                                                                                                                      ),
                                                                                                                                                                                                      /*GestureDetector(
                                                                                                                                                                                                        onTap: () {
                                                                                                                                                                                                          scanbadge();
                                                                                                                                                                                                          /*
                                                                                                                                                                                                        Navigator.push(
                                                                                                                                                                                                                                        //intrpage
                                                                                                                                                                                                                                        context,
                                                                                                                                                                                                                                        MaterialPageRoute(
                                                                                                                                                                                                  builder: (context) => MyAppL(
                                                                                                                                                                                                        title: 'logout',
                                                                                                                                                                                                        username1: "",
                                                                                                                                                                                                      ) //screen(),
                                                                                                                                                                                                  ), //MaterialPageRoute
                                                                                                                                                                                                                                      );
                                                                                                                                                                                                        */
                                                                                                                                                                                                        },
                                                                                                                                                                                                        child: ListTile(
                                                                                                                                                                                                            leading: const CircleAvatar(
                                                                                                                                                                                                                radius: 17,
                                                                                                                                                                                                                backgroundColor:
                                                                                                                                                                                                                    Colors.transparent,
                                                                                                                                                                                                                child: Center(
                                                                                                                                                                                                                    child: Icon(
                                                                                                                                                                                                                        Ionicons
                                                                                                                                                                                                                            .exit_outline,
                                                                                                                                                                                                                        color: Colors
                                                                                                                                                                                                                            .red))),
                                                                                                                                                                                                            title: Text(
                                                                                                                                                                                                              "Log out",
                                                                                                                                                                                                              style: GoogleFonts
                                                                                                                                                                                                                  .montserrat(
                                                                                                                                                                                                                      fontSize: 15,
                                                                                                                                                                                                                      fontWeight:
                                                                                                                                                                                                                          FontWeight
                                                                                                                                                                                                                              .normal,
                                                                                                                                                                                                                      color:
                                                                                                                                                                                                                          Colors.red),
                                                                                                                                                                                                            )),
                                                                                                                                                                                                      ),*/
                                                                                                                                                                                                    ],
                                                                                                                                                                                                  ),
                                                                                                                                                                                                ),
                                                                                                                                                                                              ),
                                                                                                                                                                                            )
                                                                                                                                                                                          ])//),
                                                                                                                     
                                                                                                  ])),
                                                                                                ),
                                                                                                            
                                                                                                ListTile(
                                                                                                  title: Row(children: [
                                                                                                    Text(
                                                                                                        lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                            ? 'Hello '
                                                                                                            : 'Niaje ',
                                                                                                        overflow: TextOverflow.ellipsis,
                                                                                                        style: GoogleFonts.lato(
                                                                                                            fontSize: 23,
                                                                                                            fontWeight: FontWeight.bold,
                                                                                                            color: text1)),
                                                                                                    Text('${widget.firstname}',
                                                                                                        overflow:
                                                                                                            TextOverflow.ellipsis,
                                                                                                        style: GoogleFonts.lato(
                                                                                                            fontSize: 23,
                                                                                                            fontWeight:
                                                                                                                FontWeight.bold,
                                                                                                            color: text1)),
                                                                                                    const Icon(Icons.verified,
                                                                                                        color: Colors.green, size: 16)
                                                                                                  ]),
                                                                                                  subtitle: Text(
                                                                                                      "@${widget.me}",
                                                                                                      overflow: TextOverflow.ellipsis,
                                                                                                      style: GoogleFonts.lato(
                                                                                                          color: Colors.grey)),
                                                                                                ),
                                                                                                            
                                                                                                //trailing: ,
                                                                                              ]),
                                                                                            ),
                                                                                                                                ),
                                                                                                                                body: 
                                                                                                                                RefreshIndicator(
                                                                                                                                                                                                                                                                                                                                            onRefresh: () async {
                                                                                                                                                                                                                                                                                                                                              // offnd();
                                                                                                                                                                                                                                                                                                                                              //Do whatever you want on refrsh.Usually update the date of the listview
                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                            child: SingleChildScrollView(
                                                                                                                                                                                                                                                                                                                                              child: Center(
                                                                                                                                                                                                                                                                                                                                                child: Container(
                                                                                                                                                                                                                                                                                                                                                  padding: const EdgeInsets.only(
                                                                                                                                                                                                                                                                                                                                                      left: 25, right: 25),
                                                                                                                                                                                                                                                                                                                                                  child:                                 SwipeDetector(
                                   // liveFeedback: true,
                  onSwipe: (direction, offset) {
                    //_addSwipe(direction);
                    //setState(){
                  //events.add({"${leo}":"Swiped unknown"});
                   // };
                    
                     
                  },
                  onSwipeUp: (offset) {
                     events.add({"${leo}":"Swiped up on drawer|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                    //_addSwipe(SwipeDirection.up);
                  },
                  onSwipeDown: (offset) {
                                                                                                                          events.add({"${leo}":"Swiped down on drawer|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                  
                    //_addSwipe(SwipeDirection.down);
                  },
                  onSwipeLeft: (offset) {
                     events.add({"${leo}":"Swiped left on drawer|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                  },
                  onSwipeRight: (offset) {
                   events.add({"${leo}":"Swiped right on drawer|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                  child:  Column(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //Text(wild.toString()),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //trailing: ,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Center(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 0.09,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: MediaQuery.of(context)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .size
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .width *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: text1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            height: 2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 7 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        overlaycounter++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const Padding(
                                                                                                                                                                                                                                                                                                                                                                                      padding: EdgeInsets.only(bottom:20.0),
                                                                                                                                                                                                                                                                                                                                                                                      child:  tut6()),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  now = DateFormat('EEEE dd MMM')
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .format(DateTime.now());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //returns json body from api
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //this.courseblock = result1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  leo = DateFormat.jm()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .format(DateTime.now());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                events.add({"${leo}":"Clicked on Scan|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                scanQR();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*inmat();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              chckme =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      info3.indexOf(ry);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              print(">.>>>>>>>>" +
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      chckme
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        FriendMessX1(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: ry[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              'writer']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .toString(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      repl: (int.parse(ry[
                                                                                                                                                                                                                                                                                                                                                    'id']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .toString()) -
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .toString(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      newc: info3
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .toList(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      token: widget.tr,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      myname: '',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      user: widget
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .username,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            );*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leading: Icon(Icons.qr_code_2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? "Scan"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : "Scan",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 9 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        overlaycounter++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const tut7(),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            traktar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  food2, //listoffood
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title1: widget.me,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode: darkmode,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              text1: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              scaffold1: scaffold1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              //username
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            )));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            events.add({"${leo}":"Clicked on receipt|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leading:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Icon(Icons.history, color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? "Receipt"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : "Risiti",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 10 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        overlaycounter++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const tut8(),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ShoppingListPage(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            title: darkmode,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ) //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                events.add({"${leo}":"Clicked on ShoppingList|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leading:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Icon(Icons.list, color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? "Shopping List"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : "List ya Shopping",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(Icons.payment),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text("Mpesa Number",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    FontWeight
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .bold),),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 11 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        overlaycounter++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const tut9(),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                /*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ChatScreen
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ChatScreen(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            pic_url: [],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          mUsername: '${sky['username']}',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ouser: 'Freshfit',//change according to region
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ) //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                events.add({"${leo}":"Clicked on Chat Screen|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leading: Icon(Ionicons.chatbubble_ellipses,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? "Chat with us"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    :"Ongea nasi",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            height: 10,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Center(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 0.09,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: MediaQuery.of(context)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .size
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .width *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: text1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            height: 15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                //Navigator.pop(context);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                //;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  !settings
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? settings = true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : settings = false;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 12 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        overlaycounter++;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const tut10(),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  leading: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? "Settings"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : "Mapendeleo",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  trailing: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      settings
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? Icons.arrow_drop_down
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : Icons.arrow_drop_up,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              )),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          settings
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? const SizedBox()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const EdgeInsets.all(3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: Column(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          darkmode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? Icons.dark_mode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Icons.light_mode,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Mode"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Hali",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      subtitle: lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? "dark"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : "light",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              style: GoogleFonts
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      color: Colors
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          .grey),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? "giza"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : "mwanga",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              style: GoogleFonts
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Colors.grey,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      trailing: Switch(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        activeColor: Colors.green,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          value: darkmode,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          onChanged: (c) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode = c;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              events.add({"${leo}":"Switched to ${darkmode?"darkmode":"lightmode"}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //subtitle: Text("current:  Lightmode"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          lang1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? lang1 = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : lang1 = true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         events.add({"${leo}":"Switched to ${lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)" ?"english":"swahili"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //rono3();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Icons.language,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Language"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Lugha",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      trailing: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          !lang1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? Icons
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .arrow_drop_down
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Icons
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .arrow_drop_up,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //Switch(value: true, onChanged: (c){}),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      subtitle: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          lang2 == null
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? "English"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : "${lang2}",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              color: Colors
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .grey)), //when you workon this decide on the color
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    lang1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const EdgeInsets
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    .all(5.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                title: Column(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    mainAxisAlignment:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        MainAxisAlignment
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .start,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Row(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Tap to choose"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Chagua Lugha yako",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Colors.green))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    height: 10,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        setState(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          lang1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? lang1 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : lang1 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          lang2 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "Kiswahili (ðŸ‡°ðŸ‡ª)";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode?Colors.grey.shade900:Colors.grey.shade100,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              const EdgeInsets.all(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              title:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Text("Kiswahili (ðŸ‡°ðŸ‡ª)", style: GoogleFonts.lato(color: text1)),trailing:lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ?SizedBox():CircleAvatar(radius:5,backgroundColor:Colors.green)))),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      setState(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? lang1 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : lang1 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                true;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 =
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            "English";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    child:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      color:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              darkmode?Colors.grey.shade900:Colors.grey.shade100,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const EdgeInsets.all(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "English",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              style:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  GoogleFonts.lato(color: text1))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ,trailing:lang2 ==
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ?SizedBox():CircleAvatar(radius:5,backgroundColor:Colors.green)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ])),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : const SizedBox(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Tooltip(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      message:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          "change the mode of sale notifications you get",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      child: OverlayTutorialHole(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              enabled: overlaycounter == 13 ? true : false,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                padding: const EdgeInsets.only(bottom: 2.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                radius: const Radius.circular(25.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  OverlayTutorialWidgetHint(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    position: (rect) => Offset(-1.0, rect.height),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context, entryRect) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      return Center(
                                                                                                                                                                                                                                                                                                                                                                                  child: GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                    onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                      setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        isTutorialenabled=false;
                                                                                                                                                                                                                                                                                                                                                                                       overlaycounter=90;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .play(AssetSource("notific.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                      });
                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                    child: const tut11(),
                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          leading: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              salenote
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? Icons.lock
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : Icons.lock_open,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? "Sale alert"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : "Taarifa ya kuuza",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    FontWeight
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          trailing: Switch(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            activeColor: Colors.green,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              value: salenote,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              onChanged: (c) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  salenote = c;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  events.add({"${leo}":"${salenote?"Removes":"Allowed"} Sale Alert |${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //subtitle: Text("current:  Lightmode"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        events.add({"${leo}":"Clicked on Contact US|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(Icons.mail,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Contact Us"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Wasiliana nasi",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      subtitle: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        "buzz4274@gmail.com",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: Colors.grey),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ])),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              height: 0.07,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              width: MediaQuery.of(context)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .size
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .width *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  .6,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              color: text1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                !legal
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? legal = true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : legal = false;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    events.add({"${leo}":"Tapped on Legal|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              leading: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? "Legal"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : "sheria",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              trailing: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                legal
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? Icons.arrow_drop_down
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : Icons.arrow_drop_up,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          legal
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? const SizedBox()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const EdgeInsets.all(3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: Column(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        events.add({"${leo}":"Opened policy|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  legal1(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      darkmode:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          darkmode) //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(Icons.policy,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Policy"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Sera",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //Switch(value: true, onChanged: (c){}),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //when you workon this decide on the color
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        events.add({"${leo}":"Opened Terms&COndition|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  legal2(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      darkmode:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          darkmode) //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        //showPlacePicker();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: Icon(Icons.balance,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          color: icon1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        lang2 !=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? "Terms and conditions"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : "Sheria na Masharti",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ), //when you workon this decide on the color
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ])),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            height: 10,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Center(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              height: 0.09,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              width: MediaQuery.of(context)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .size
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .width *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              color: text1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Text(""),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             GestureDetector(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    events.add({"${leo}":"Logged out|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //intrpage
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          builder: (context) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               MyAppL(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                title:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    'logout',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    username1: "${sky["username"]}|${widget.token}|${widget.id}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ) //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      leading: CircleAvatar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          radius: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          backgroundColor: Colors
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .transparent,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: const Center(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Ionicons.log_out_outline,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  color: Colors
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .red))),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       "Log out",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        style: GoogleFonts
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            .lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontSize: 17,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                fontWeight:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    FontWeight
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        .normal,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    text1),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      )),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            height: 20,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ListTile(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ListTile()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          /*ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            leading: const Icon(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Icons.exit_to_app,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              color: Colors.red,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            title: Text("Sign out",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontSize: 16,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    fontWeight: FontWeight.bold,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    color: Colors.black)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Navigator.push(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                context,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                MaterialPageRoute(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    builder: (context) => MyAppL(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        title:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            'logout') //screen(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ), //MaterialPageRoute
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              //get out of my app
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ]),
                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                ),
                                                                                                                                bottomNavigationBar: Container(
                                                                                            color: darkmode?Colors.grey.shade900.withOpacity(0.9):Colors.white.withOpacity(0.9),
                                                                                            // padding:EdgeInsets.all(8),
                                                                                            height: 100,
                                                                                            child: Column(
                                                                                                mainAxisAlignment: MainAxisAlignment.center,
                                                                                                children: [
                                                                                                  
                                                                                                  Text("v1.0.6(viltrum)",//change here
                                                                                                      style: GoogleFonts.inconsolata(
                                                                                                          //fontSize: 15,
                                                                                                          color: Colors.grey,
                                                                                                          fontWeight: FontWeight.w600)),
                                                                                                ]),
                                                                                                                                ),
                                                                                                                              )),
                                                  appBar: AppBar(
                                                    iconTheme: IconThemeData(color: icon1),
                                                    
                                                    //centerTitle:true,
                                                    title: Wrap(children: [
                                                      InkWell(
                                                        onTap:(){
                                                          events.add({"${leo}":"clicked on Title|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                        },
                                                        child: Shimmer.fromColors(
                                                                                                      period: const Duration(milliseconds: 55500),
                                                                                                      baseColor: text1,
                                                                                                      highlightColor: darkmode?Colors.grey.shade200.withOpacity(0.5):Colors.grey.shade200.withOpacity(0.9),
                                                                                                      child: Text("Freshfit",
                                                              style: GoogleFonts.paytoneOne(color: text1,fontWeight:FontWeight.normal)),
                                                        ),
                                                      ),
                                                      /*Shimmer.fromColors(
                                                        period: const Duration(milliseconds: 5500),
                                                        baseColor: Colors.green.shade300,
                                                        highlightColor: Colors.green.shade900,
                                                        child: Text(" groceries.",
                                                            style: GoogleFonts.lato(
                                                                //color: Colors.green,
                                                                fontWeight: FontWeight.w300)),
                                                      ),*/
                                                    ]),
                                                    actions: [
                                                      SizedBox(
                                                        width:170,
                                                        child:Row(
                                                          mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                                                          children:[
                                     InkWell(
                                                          
                                                          onTap: () {
                                                            events.add({"${leo}":"Clicked on Search|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                            getfood();
                                    
                                                            showModalBottomSheet(
                                                                        isScrollControlled: true,
                                                                        context: context,
                                                                        builder: (context) {
                                                                          return StatefulBuilder(
                                                                              builder: (BuildContext
                                                                                      context,
                                                                                  StateSetter
                                                                                      setState /*You can rename this!*/) {
                                                                            return searchQ7(
                                                                        misearch: food7,
                                                                        colorx: scaffold1,
                                                                      //  geolocation: widget.geolocation,
                                                                        text1:text1,
                                                                        lang: lang2,
                                                                        xme: darkmode,
                                                                        me: widget.me,
                                                                        username: widget.me,
                                                                        token:
                                                                            widget.token.toString(),
                                                                      );});},
                                                            );
                                                          },
                                                          child: OverlayTutorialHole(
                                            enabled: overlaycounter == 1 ? true : false,
                                            overlayTutorialEntry: OverlayTutorialRectEntry(
                                              padding: const EdgeInsets.only(bottom: -2.0),
                                              radius: const Radius.circular(25.0),
                                              overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                OverlayTutorialWidgetHint(
                                                  position: (rect) => Offset(-1.0, rect.height),
                                                  builder: (context, entryRect) {
                                                    return Center(
                                                      child: GestureDetector(
                                                        onTap: () {
                                                          setState(() {
                                                            overlaycounter++;
                                                            audioCache
                                                                .play(AssetSource("notific.mp3"));
                                                          });
                                                        },
                                                        child: const tut1(),
                                                      ),
                                                    );
                                                  },
                                                ),
                                              ],
                                            ),
                                            child: CircleAvatar(
                                              radius:25,
                                              backgroundColor: Colors.transparent,
                                              child: Icon(
                                                                  Icons.search,
                                                                  size: 28.0,
                                                                  color: darkmode
                                                                      ? Colors.white
                                                                      : Colors.black,
                                                                ),
                                            ),
                                                            ),
                                     ),
                                    
                                                          InkWell(
                                                            onTap: (){
                                                              events.add({"${leo}":"Clicked on NOtification|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                              showModalBottomSheet(
                                                          context: context,
                                                          isScrollControlled: true,
                                                          builder: (context) {
                                                            return NotificationPage(
                                                              darkmode: darkmode,
                                                              username: widget.me,//username
                                                              token: widget.token,
                                                              information: information,
                                                              pics: picpic,
                                                            );
                                                          });
                                                            },
                                                            child:OverlayTutorialHole(
                                            enabled: overlaycounter == 2 ? true : false,
                                            overlayTutorialEntry: OverlayTutorialRectEntry(
                                              padding: const EdgeInsets.only(bottom: 2.0),
                                              radius: const Radius.circular(25.0),
                                              overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                OverlayTutorialWidgetHint(
                                                  position: (rect) => Offset(-1.0, rect.height),
                                                  builder: (context, entryRect) {
                                                    return Center(
                                                      child: GestureDetector(
                                                        onTap: () {
                                                          setState(() {
                                                            overlaycounter++;
                                                            audioCache
                                                                .play(AssetSource("notific.mp3"));
                                                          });
                                                        },
                                                        child: const tut2(),
                                                      ),
                                                    );
                                                  },
                                                ),
                                              ],
                                            ),
                                            child: CircleAvatar(
                                                                radius: 25,
                                                                backgroundColor: Colors.transparent,
                                                                child: Icon(
                                                                  Ionicons.notifications
                                                                  ,
                                                                  size: 28.0,
                                                                  color: darkmode
                                                                      ? Colors.white
                                                                      : Colors.black,
                                                                ),
                                                              ),
                                                            ),
                                                          ),
                                                        PopupMenuButton<String>(
                                                elevation: 0.0,
                                                  color: Colors.transparent,
                                                  child:
                                                   OverlayTutorialHole(
                                            enabled: overlaycounter == 3 ? true : false,
                                            overlayTutorialEntry: OverlayTutorialRectEntry(
                                              padding: const EdgeInsets.only(bottom: 2.0),
                                              radius: const Radius.circular(25.0),
                                              overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                OverlayTutorialWidgetHint(
                                                  position: (rect) => Offset(-1.0, rect.height),
                                                  builder: (context, entryRect) {
                                                    return Center(
                                                      child: GestureDetector(
                                                        onTap: () {
                                                          setState(() {
                                                            overlaycounter++;
                                                            audioCache
                                                                .play(AssetSource("notific.mp3"));
                                                          });
                                                        },
                                                        child: const tut3(),
                                                      ),
                                                    );
                                                  },
                                                ),
                                              ],
                                            ),
                                            child:
                                                    
                                                        
                                                                       CircleAvatar(
                                                                            radius: 25,
                                                                            backgroundColor:
                                                                                Colors.transparent,
                                                                            child: Stack(children: [
                                                                          CircleAvatar(
                                                                            radius: 17,
                                                                            backgroundColor:
                                                                                Colors.green,
                                                                            child: Center(
                                                                              child: Text(
                                                                              widget.firstname.toString().substring(0,1),
                                                                                style: GoogleFonts
                                                                                    .lato(
                                                                                        fontWeight:
                                                                                            FontWeight
                                                                                                .w500,
                                                                                        color: Colors
                                                                                            .white,
                                                                                        fontSize: 22),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                          ...picpic
                                                                            .where((c) =>
                                                                                c['username1'] ==
                                                                                "${widget.me}")
                                                                            .map((ui) => CircleAvatar(
                                                                                  radius: 17,
                                                                                  backgroundColor:
                                                                                      Colors
                                                                                          .transparent,
                                    
                                                                                  backgroundImage:
                                                                                      NetworkImage(
                                                                                    ui['image'],
                                                                                  ), //ui['image'],
                                                                                )),
                                                                                /*Positioned(
                                                                                                right:0,
                                                                                                bottom:0,
                                                                                                child: CircleAvatar(
                                                                                                  radius: 5,
                                                                                                  backgroundColor: scaffold1,
                                                                                            child:CircleAvatar(backgroundColor: Colors.red,
                                                                                            radius: 3,
                                                                                            )
                                                                                                ),
                                                                                              )*/
                                                                          
                                                                        ]),
                                                                      ),
                                                    ),
                                                  
                                                  onSelected: (String result) {
                                                    events.add({"${leo}":"Opened profile|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                    setState(() {
                                                      // Handle result from pop-up menu
                                                    });
                                                  },
                                                  itemBuilder: (BuildContext context) =>
                                                      <PopupMenuEntry<String>>[
                                                        PopupMenuItem<String>(
                                                          padding: const EdgeInsets.all(25.0),
                                                          // offset:Offset.fromDirection(-20.0),
                                                          value: 'switch account',
                                                          child: Column(
                                                            children: [
                                                              Container(
                                                               // width:550,
                                                                padding: const EdgeInsets.all(15.0),
                                                                decoration: BoxDecoration(
                                                                  borderRadius:
                                                                      BorderRadius.circular(20),
                                                                  color: darkmode
                                                                      ? Colors.grey.shade900
                                                                      : Colors.grey.shade100,
                                                                ),
                                                                //x["skills"] .toString().replaceAll("[","").replaceAll("]","").split(",")
                                                                // height: 200,
                                                                width: MediaQuery.of(context).size.width,
                                                                child: Column(
                                                                  children: [
                                                                    
                                                                    ListTile(
                                                                      title: Text(
                                                                       "Account",
                                                                          style: GoogleFonts.dmSans(
                                                                            fontSize: 22,
                                                                            fontWeight:
                                                                                FontWeight.bold,
                                                                            color: darkmode
                                                                                ? Colors.white
                                                                                : Colors.black,
                                                                          ),
                                                                        ),
                                                                        subtitle: Text(
                                                                          "theme: ${darkmode?"Dark mode":"light mode"}",
                                                                          style: GoogleFonts.dmSans(
                                                                            fontSize: 14,
                                                                            fontWeight:
                                                                                FontWeight.normal,
                                                                            color: darkmode
                                                                                ? Colors.grey
                                                                                : Colors.black,
                                                                          ),
                                                                        ),
                                                                        trailing: InkWell(
                                                                          onTap: () {
                                                                            events.add({"${leo}":"Changed theme to ${!darkmode?"Dark mode":"light mode"}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                                            setState(
                                                                              () {
                                                                                darkmode = darkmode
                                                                                    ? false
                                                                                    : true;
                                                                              },
                                                                            );
                                                                            Navigator.pop(context);
                                                                          },
                                                                          child: AvatarGlow(
                                      startDelay: const Duration(milliseconds: 1000),
                                      glowColor:darkmode? Colors.white:Colors.grey.shade900,
                                      //glowShape: BoxShape.circle,
                                      //animate: _animate,
                                      curve: Curves.fastOutSlowIn,
                                      //endRadius: 20,
                                      child: CircleAvatar(
                                                                                radius: 15,
                                                                                backgroundColor:
                                                                                    darkmode
                                                                                        ? Colors.grey
                                                                                            .shade100
                                                                                        : Colors.grey
                                                                                            .shade900,
                                                                                child: Center(
                                                                                    //dark_mode
                                                                                    child: Icon(
                                                                                  darkmode
                                                                                      ? Icons.light_mode
                                                                                      : Icons.dark_mode,
                                                                                  color:Colors
                                                                                          .green,
                                                                                ))),
                                                                          ),
                                                                        )),
                                                                    ListTile(
                                                                      leading: Container(
                                                                        child: Stack(children: [
                                                                          CircleAvatar(
                                                                            radius: 17,
                                                                            backgroundColor:
                                                                                Colors.green,
                                                                            child: Center(
                                                                              child: Text(
                                                                              widget.firstname.toString().substring(0,1),
                                                                                style: GoogleFonts
                                                                                    .lato(
                                                                                        fontWeight:
                                                                                            FontWeight
                                                                                                .w500,
                                                                                        color: Colors
                                                                                            .white,
                                                                                        fontSize: 22),
                                                                              ),
                                                                            ),
                                                                          ),
                                                                          ...picpic
                                                                            .where((c) =>
                                                                                c['username1'] ==
                                                                                "${widget.me}")
                                                                            .map((ui) => CircleAvatar(
                                                                                  radius: 17,
                                                                                  backgroundColor:
                                                                                      Colors
                                                                                          .transparent,
                                    
                                                                                  backgroundImage:
                                                                                      NetworkImage(
                                                                                    ui['image'],
                                                                                  ), //ui['image'],
                                                                                )),
                                                                          
                                                                        ]),
                                                                      ),
                                                                      
                                                                      title: Text(
                                                                        //mstudent: getstudent2(),
                                                                        //mstudent2: studentdet,
                                                                        //"${getName(widget.mstudent2, widget.mstudent["image"])}"
                                                                        //"${getName(studentdet, getstudent2()["image"])}", //"${sky2["username"].toString()}",
                                                                        widget.firstname.toString(),
                                                                        style: GoogleFonts.lato(
                                                                          //fontSize: 15,
                                                                          fontWeight:
                                                                              FontWeight.normal,
                                                                          color: darkmode
                                                                              ? Colors.white
                                                                              : Colors.black,
                                                                        ),
                                                                      ),
                                                                      subtitle: Row(
                                                                          mainAxisAlignment:
                                                                              MainAxisAlignment.start,
                                                                          children: [
                                                                            Text(
                                                                              "@${widget.me}",
                                                                              style: GoogleFonts
                                                                                  .lato(
                                                                                      //fontSize: 15,
                                                                                      fontWeight:
                                                                                          FontWeight
                                                                                              .normal,
                                                                                      color: Colors
                                                                                          .grey),
                                                                            ),
                                                                          ]),
                                                                    ),
                                                                      Padding(
                                                                      padding:
                                                                          const EdgeInsets.all(8.0),
                                                                      child: Container(
                                                                        height: 0.07,
                                                                        color:  Colors.grey,
                                                                      ),
                                                                    ),
                                                                    GestureDetector(
                                                                      onTap: () {
                                                                        events.add({"${leo}":"Clicked on Recent orders|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                                        showModalBottomSheet(
                                                                isScrollControlled: true,
                                                                context: context,
                                                                builder: (context) {
                                                                  return Scaffold(
                                                                    backgroundColor: scaffold1,
                                                                    appBar: AppBar(
                                                                      centerTitle: true,
                                                                      elevation: 0.0,
                                                                      backgroundColor: scaffold1,
                                                                    ),
                                                                    body: Scaffold(
                                                                      backgroundColor: scaffold1,
                                                                      appBar: AppBar(
                                                                          centerTitle: true,
                                                                          elevation: 0.0,
                                                                          backgroundColor: scaffold1,
                                                                          title: const Chip(
                                                                              label: Text(
                                                                                  'Track your  orders'))),
                                                                      body: Center(
                                                                        child: RefreshIndicator(
                                                                          onRefresh: () async {
                                                                            setState(() {
                                                                              getWealth();
                                                                              getWealth2();
                                                                            });
                                    
                                                                            //print("hello bedroom dev");
                                                                            //getWeather();
                                                                            //rono = false;
                                                                            //Do whatever you want on refrsh.Usually update the date of the listview
                                                                          },
                                                                          child:
                                                                              SingleChildScrollView(
                                                                                  child: Column(
                                                                            mainAxisAlignment:
                                                                                MainAxisAlignment
                                                                                    .center,
                                                                            children: <Widget>[
                                                                       food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).toList().isEmpty?      SizedBox(child:Column(children:[SizedBox(
                                          height: 150,
                                          width: 150,
                                          child: 
                                            Lottie.asset('assets/recent.json'),),
                                      
                                           
                                    ListTile(title: Center(
                                                                          child: Text(//add cool image
                                                                              lang2 !=
                                                                                      "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                  ? "Nothing here for now"
                                                                                  : "Hakuna kwa sasa",
                                                                              style: GoogleFonts.rubik(
                                                                               // fontSize: 20,
                                                                                  color: Colors.grey,
                                                                                  fontWeight: FontWeight
                                                                                      .bold)),
                                                                        ),),])):SizedBox(),
                                                                              ...food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).map(
                                                                                  (i)
                                                                                      //var index = sky.indexOf(i);
                                                                                      =>
                                                                                      i['owner'].toString() !=
                                                                                              widget
                                                                                                  .me
                                                                                                  .toString()
                                                                                          ? Container()
                                                                                          : Card(
                                                                                              color: darkmode
                                                                                                  ? Colors
                                                                                                      .grey.shade900
                                                                                                  : Colors.grey[
                                                                                                      50],
                                                                                              elevation: darkmode
                                                                                                  ? 0.4
                                                                                                  : 0,
                                                                                              child: Column(
                                                                                                  children: [
                                                                                                    Container(
                                                                                                      width: MediaQuery.of(context).size.width,
                                                                                                      child: Card(
                                                                                                          color: scaffold1,
                                                                                                          elevation: 0,
                                                                                                          child: Column(children: [
                                                                                                            //SizedBox(height: 5),
                                                                                                            //Container(height: 0.08, width: MediaQuery.of(context).size.width * .8, color: text1), SizedBox(height: 5),
                                                                                                            //ListTile(title: Text("${food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).take(1).toList()[0]["id"].toString()}"), subtitle: Text("${food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).take(1).toList()[0]["ordertime"].toString()}")),
                                                                                                            /*ListTile(
                                                                                                    title: Text("#" + i['id'].toString())
                                                                                                    //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                    ),*/
                                                                                                            /*ListTile(
                                                                                                  leading: Icon(
                                                                                                      Icons.storefront,
                                                                                                      color: Colors.amber),
                                                                                                  title:
                                                                                                      Text(i['restaurantx'].toString()),
                                                                                                  subtitle: Text(i['table'].toString() == 'Menu'
                                                                                                      ? "Pickup order"
                                                                                                      : i['table'].toString()), //
                                                                                                  /*trailing: Chip(
                                                                                                      backgroundColor: Colors.white,
                                                                                                      avatar: Icon(Icons.timer_outlined, color: Colors.green),
                                                                                                      label: Text(i['table'] == 'Menu' ? i['ordertime'] : 'Anytime')),*/
                                                                                                  //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                ),*/
                                                                                                            ListTile(
                                                                                                              trailing: i['ordertrak'].toString() == "ready" ? Checkbox(value: true, onChanged: (l) {}) : Checkbox(value: false, onChanged: (l) {}),
                                                                                                              title: Text(
                                                                                                                "#" + i['id'].toString() + "        ",
                                                                                                                style: GoogleFonts.lato(color: text1, fontSize: 21),
                                                                                                              ),
                                                                                                              subtitle: Text(
                                                                                                                i['time'].toString(),
                                                                                                                style: GoogleFonts.lato(color: text1),
                                                                                                              ),
                                                                                                            ),
                                    
                                                                                                            // Text(food7.toString()),
                                                                                                            //Text(i['food'].replaceAll("],","|").replaceAll("[","").replaceAll("]]","").split("|")[0].split(",")[0].toString()),
                                                                                                            ...i['food'].replaceAll("],", "|").replaceAll("[", "").replaceAll("]]", "").split("|").map((k) => ListTile(
                                                                                                                    title: Column(
                                                                                                                  children: [
                                                                                                                    Card(
                                                                                                                        elevation: 0,
                                                                                                                        color: !amount3.contains(i)
                                                                                                                            ? scaffold1
                                                                                                                            : darkmode
                                                                                                                                ? Colors.white12
                                                                                                                                : Colors.amber.shade50,
                                                                                                                        child: Container(
                                                                                                                          padding: const EdgeInsets.all(3.0),
                                                                                                                          child: SingleChildScrollView(
                                                                                                                            child: Row(mainAxisAlignment: MainAxisAlignment.end, children: [
                                                                                                                              Container(
                                                                                                                                child: Card(
                                                                                                                                  color: Colors.transparent,
                                                                                                                                  elevation: 0,
                                                                                                                                  child: Column(children: [
                                                                                                                                    Container(
                                                                                                                                      height: 80,
                                                                                                                                      width: 79,
                                                                                                                                      decoration: BoxDecoration(
                                                                                                                                        //color:Colors.green,
                                                                                                                                        borderRadius: const BorderRadius.all(Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                            ),
                                                                                                                                        image: DecorationImage(
                                                                                                                                          image: NetworkImage("${k.split(",")[1].toString().replaceAll(" ", "")}")
                                                                                                                                          //k.split(",")[1],                                                                         ),
                                                                                                                                          ,
                                                                                                                                          fit: BoxFit.cover,
                                                                                                                                        ),
                                                                                                                                      ),
                                                                                                                                      child: null,
                                                                                                                                    )
                                                                                                                                  ]),
                                                                                                                                ),
                                                                                                                              ),
                                                                                                                              Container(
                                                                                                                                  width: MediaQuery.of(context).size.width > 600 ? MediaQuery.of(context).size.width * .680 : MediaQuery.of(context).size.width * .500,
                                                                                                                                  child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [
                                                                                                                                    ListTile(
                                                                                                                                      title: Text(
                                                                                                                                        k.split(",")[0],
                                                                                                                                        style: GoogleFonts.lato(fontSize: 17, color: amount3.contains(i) ? text1 : text1, fontWeight: FontWeight.bold),
                                                                                                                                      ),
                                                                                                                                      subtitle: Wrap(
                                                                                                                                        children: [
                                                                                                                                          Text(ii == i['name'] ? (int.parse(k.split(",")[3].toString()) * quantity).toString() + 'KES' : k.split(",")[3].toString() + 'KES',
                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                  /*backgroundColor: Colors
                                                                                                .red
                                                                                                .withOpacity(
                                                                                                    0.1),*/
                                                                                                                                                  color: Colors.green)),
                                                                                                                                          Text(" ", style: GoogleFonts.lato(color: text1)),
                                    
                                                                                                                                          /* Text( ii == i['name']
                                                                                              ? (int.parse(i['points']) *
                                                                                                          quantity)
                                                                                                      .toString(): i['points']
                                                                                                      .toString() 
                                                                                                  ,style: GoogleFonts.lato(
                                                                                                    color: darkmode?Colors.amber.shade200:Colors.amber.shade900
                                                                                                  ),),
                                                                                                  Icon(Icons.diamond,color:icon1,size:17),*/
                                                                                                                                        ],
                                                                                                                                      ),
                                                                                                                                    ),
                                                                                                                                  ])),
                                                                                                                              Container(
                                                                                                                                width: MediaQuery.of(context).size.width * .137,
                                                                                                                                child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [
                                                                                                                                  // ListTile(),
                                                                                                                                  Center(
                                                                                                                                    child: ListTile(
                                                                                                                                      title: Center(child: Text(k.split(",")[2].toString(), style: GoogleFonts.lato(fontWeight: FontWeight.bold, color: text1))),
                                                                                                                                      //leading:,Row(children:[ CircleAvatar(child:Icon(Icons.shopping_bag,color:Colors.green),radius:15,backgroundColor:Colors.grey[200])
                                                                                                                                      //    ,Text('1')])
                                                                                                                                      //trailing: Text(ii == i['name']?(int.parse(i['price'])*quantity).toString()+'/=':i['price'].toString()+'/=',style:GoogleFonts.lato(fontSize:15,fontWeight:FontWeight.bold)),
                                    
                                                                                                                                      //subtitle: Text(i['price'].toString()),
                                                                                                                                    ),
                                                                                                                                  ),
                                                                                                                                  // ListTile()
                                                                                                                                ]),
                                                                                                                              )
                                                                                                                            ]),
                                                                                                                          ),
                                                                                                                        )
                                    
                                                                                                                        //end
                                                                                                                        )
                                                                                                                    /* ListTile(
                                                                                                     leading: 
                                                                                                      CircleAvatar(
                                                                                                        backgroundColor: Colors.transparent,
                                                                    radius: 30,
                                                                    backgroundImage: NetworkImage(
                                                                      k.split(",")[1].toString()
                                                                    ), //AtImage(i['image'],),
                                                                  ),
                                                                                                    
                                                                                                     title: Text(k.split(",")[1].toString()),
                                                                                                   ),*/
                                    
                                                                                                                    //  ...food7.map((lo)=>//Text(lo['name'].toString())
                                                                                                                    // lo['name'] ==k.split(",")[0].toString()?  Text(k.split(",")[0].toString()):SizedBox())
                                                                                                                    //
                                                                                                                    ,
                                                                                                                    const SizedBox(height: 10),
                                                                                                                    Container(height: 0.07, width: MediaQuery.of(context).size.width * .8, color: text1),
                                                                                                                    const SizedBox(height: 10),
                                                                                                                  ],
                                                                                                                )
                                                                                                                    //Text(k.split(",")[0].toString()),
                                    
                                                                                                                    )),
                                    
                                                                                                            ListTile(
                                                                                                              tileColor: darkmode ? Colors.grey.shade900 : Colors.grey.shade100,
                                                                                                              //leading: Text(i['time'].toString(),style:GoogleFonts.lato(color:Colors.black)),
                                                                                                              title: Text(
                                                                                                                'You spent a total of:',
                                                                                                                style: GoogleFonts.lato(color: text1),
                                                                                                              ),
                                                                                                              subtitle: Text(i['totalprice'].toString() + '\tKES', style: GoogleFonts.lato(color: darkmode ? Colors.grey.shade50 : Colors.grey)), //
                                    
                                                                                                              //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                            ),
                                                                                                          ])),
                                                                                                    )
                                    
                                                                                                    //play within this boundaries
                                    
                                                                                                    //.toList(),
                                    
                                                                                                    ,
                                                                                                    Container(
                                                                                                      height: 10,
                                                                                                    ),
                                                                                                  ]))
                                    
                                                                                  //play within this boundaries
                                                                                  ),
                                                                            ],
                                                                          )),
                                                                        ),
                                                                      ),
                                                                    ),
                                                                    
                                                                  );
                                                                });
                                                                       // scanbadge();
                                                                        //Navigator.pop(context);
                                                                      },
                                                                      child: ListTile(
                                                                          leading: Stack(
                                                                            children: [
                                                                              CircleAvatar(
                                                                                  radius: 17,
                                                                                  backgroundColor: Colors
                                                                                      .grey.shade700,
                                                                                  child: const Center(
                                                                                      child: Icon(
                                                                                          Ionicons.bag,
                                                                                          color: Colors
                                                                                              .white))),
                                                                                              Positioned(
                                                                                                right:0,
                                                                                                bottom:0,
                                                                                                child: CircleAvatar(
                                                                                                  radius: 7,
                                                                                                  backgroundColor: !darkmode
                                                                                        ? Colors.grey
                                                                                            .shade100
                                                                                        : Colors.grey
                                                                                            .shade900,
                                                                                            child:CircleAvatar(backgroundColor: Colors.red,
                                                                                            radius: 5,
                                                                                            )
                                                                                                ),
                                                                                              )
                                                                            ],
                                                                          ),
                                                                          title: Text(
                                                                            "Recent orders",
                                                                            style: GoogleFonts
                                                                                .lato(
                                                                                    fontSize: 15,
                                                                                    fontWeight:
                                                                                        FontWeight
                                                                                            .normal,
                                                                                    color:
                                                                                        Colors.grey),
                                                                          ),
                                                                          
                                                                          
                                                                          
                                                                          ),
                                                                    ),
                                                                    InkWell(
                                                                      onTap:(){
                                                                        events.add({"${leo}":"Clicked on Map|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                                         Navigator.push(
                                                              context,
                                                              MaterialPageRoute(
                                                                  builder: (context) =>  screenmap(
                                                                        mode:darkmode
                                                                      )),
                                                            );
                                                                      },
                                                                      child: ListTile(
                                                                        leading:CircleAvatar(
                                                                           radius: 17,
                                                                                  backgroundColor: icon1,
                                                                          child: Icon(
                                                                            Ionicons.bicycle
                                                                            ,
                                                                            size: 28.0,
                                                                            color:  Colors.white
                                                                                ,
                                                                          ),
                                                                        ),
                                                                        title:Text(
                                                                  lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                      ? "Delivery Map"
                                                                      : "Map ya delivery",
                                                                  style: GoogleFonts.lato(
                                                                      fontSize: 15,
                                                                      color: Colors.grey,),
                                                                ), 
                                                                      ),
                                                                    ),
                                    
                                    ListTile(
                                                                onTap: () {
                                                                  showPlacePicker();
                                                                  events.add({"${leo}":"Clicked on Changing delivery address|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                         
                                                                },
                                                                leading: CircleAvatar(
                                                                                  radius: 17,
                                                                                  backgroundColor: Colors
                                                                                      .grey.shade700,
                                                                                  child: Center(
                                                                                    child: Icon(Icons.location_pin,
                                                                                             color:Colors.white,                                       ),
                                                                                  ),
                                                                ),
                                                                title: Text(
                                                                  lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                      ? "Delivery Address"
                                                                      : "Place ya Kupata order yako",
                                                                  style: GoogleFonts.lato(
                                                                      fontSize: 15,
                                                                      color: Colors.grey,),
                                                                ),
                                                              ),
                                                                     /*GestureDetector(
                                                                      onTap: () {
                                                                        scanbadge();
                                                                        /*
                                                                      Navigator.push(
                                                            //intrpage
                                                            context,
                                                            MaterialPageRoute(
                                                                builder: (context) => MyAppL(
                                                                      title: 'logout',
                                                                      username1: "",
                                                                    ) //screen(),
                                                                ), //MaterialPageRoute
                                                          );
                                                                      */
                                                                      },
                                                                      child: ListTile(
                                                                          leading: const CircleAvatar(
                                                                              radius: 17,
                                                                              backgroundColor:
                                                                                  Colors.transparent,
                                                                              child: Center(
                                                                                  child: Icon(
                                                                                      Ionicons
                                                                                          .exit_outline,
                                                                                      color: Colors
                                                                                          .red))),
                                                                          title: Text(
                                                                            "Log out",
                                                                            style: GoogleFonts
                                                                                .lato(
                                                                                    fontSize: 15,
                                                                                    fontWeight:
                                                                                        FontWeight
                                                                                            .normal,
                                                                                    color:
                                                                                        Colors.red),
                                                                          )),
                                                                    ),*/
                                                                  ],
                                                                ),
                                                              ),
                                                            ],
                                                          ),
                                                        )
                                                      ]),
                                    
                                            
                                                            
                                                          ]
                                                        )
                                                      ),
                                                      const SizedBox(
                                                        width: 5,
                                                      )
                                                    ],
                                                    // preferredSize: Size.fromHeight(100),
                                                    flexibleSpace: new ClipRect(
                                                        child: new BackdropFilter(
                                                            filter: new ImageFilter.blur(
                                                                sigmaX: 10.0, sigmaY: 10.0),
                                                            child: Container(
                                                              //height: MediaQuery.of(context).size.height * .23,
                                                              decoration: BoxDecoration(
                                                                //color: Colors.transparent,
                                    
                                                                gradient: LinearGradient(
                                                                  colors: <Color>[
                                                                    scaffold1,
                                                                    scaffold1,
                                                                    darkmode
                                                                        ? scaffold1
                                                                        : Colors.white,
                                                                    darkmode
                                                                        ? scaffold1
                                                                        : Colors.white,
                                                                    darkmode
                                                                        ? scaffold1
                                                                        : Colors.white,
                                                                    darkmode
                                                                        ? scaffold1
                                                                        : Colors.white
                                                                  ],
                                                                ),
                                                                //color:Colors.white,
                                                                borderRadius: const BorderRadius.all(
                                                                    Radius.circular(
                                                                        10.0) //                 <--- border radius here
                                                                    ),
                                                              ),
                                                              // height: 200,
                                                              // width: MediaQuery.of(context).size.width,
                                                              //
                                                            ))),
                                                    elevation: 0.0,
                                                    backgroundColor: scaffold1,
                                                    //centerTitle:true,
                                    
                                                    bottom: 
                                                       PreferredSize(
                                                        preferredSize: const Size.fromHeight(100.0),
                                                        child:OverlayTutorialHole(
                                            enabled: overlaycounter == 4 ? true : false,
                                            overlayTutorialEntry: OverlayTutorialRectEntry(
                                              padding: const EdgeInsets.only(bottom: 2.0),
                                              radius: const Radius.circular(25.0),
                                              overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                OverlayTutorialWidgetHint(
                                                  position: (rect) => Offset(-1.0, rect.height),
                                                  builder: (context, entryRect) {
                                                    return Center(
                                                      child: GestureDetector(
                                                        onTap: () {
                                                                 //     scaffoldKey.currentState?.openDrawer();
                                    
                                                          setState(() {
                                    overlaycounter++;//
                                                        
                                           // Scaffold.of(context).openDrawer();
                                          
                                                            audioCache
                                                                .play(AssetSource("notific.mp3"));
                                                          });
                                                          
                                                        },
                                                        child: const tut4(),
                                                      ),
                                                    );
                                                  },
                                                ),
                                              ],
                                            ),
                                            child: TabBar(
                                              controller: _tabController,
                                             
                                                            dividerColor: Colors.transparent,
                                                                            tabAlignment: TabAlignment.start,
                                                            isScrollable: true,
                                                            indicatorSize: TabBarIndicatorSize.tab,
                                                            indicator: const UnderlineTabIndicator(
                                                                borderSide: BorderSide(
                                                                  //height:1.0,
                                                                  width: 1.0,
                                                                  color: Colors.green,
                                                                ),
                                                                insets: const EdgeInsets.symmetric(
                                                                    horizontal: 36.0)),
                                                            indicatorColor: Colors.black,
                                                            unselectedLabelColor: Colors.grey[900],
                                                            labelColor: Colors.black,
                                                            
                                                            tabs: [
                                                              OverlayTutorialHole(
                                                                                      enabled: overlaycounter == 5 ? true : false,
                                                                                      overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                        padding: const EdgeInsets.all( 20.0),
                                                                                        radius: const Radius.circular(25.0),
                                                                                        overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                          OverlayTutorialWidgetHint(
                                                                                            position: (rect) => Offset(-1.0, rect.height),
                                                                                            builder: (context, entryRect) {
                                                                                              return Center(
                                                                                                child: GestureDetector(
                                                                                                  onTap: () {
                                                                                                    setState(() {
                                                                                                          //isTutorialenabled = false;
                                     
                                                                                                      overlaycounter++;
                                                                   //                                   audioCache
                                                                 // .play(AssetSource("notific.mp3"));
                                                                  //_controllerTopCenter.play();
                                                                                                    });
                                                                                                  },
                                                                                                  child: const tut12(),
                                                                                                ),
                                                                                              );
                                                                                            },
                                                                                          ),
                                                                                        ],
                                                                                      ),
                                                                                      child: Card(
                                                                                                                                        color: Colors.transparent,
                                                                                                                                        elevation: 0,
                                                                                                                                        child: Column(
                                                                                                                                          children: [
                                                                                                                                            CircleAvatar(
                                                                                                                                                radius: 30,
                                                                                                                                                child: Stack(children: [
                                                                                                                                                  Center(
                                                                                                                                                    child: Text(
                                                                                                                                                        "${widget.firstname.substring(0, 1)}",
                                                                                                                                                        style: GoogleFonts.lato(
                                                                                        fontWeight:
                                                                                            FontWeight
                                                                                                .bold)),
                                                                                                                                                  ),
                                                                                                                                                  ...picpic
                                                                                                                                                      .where((c) =>
                                                                                      c['username1'] ==
                                                                                      "${widget.me}")
                                                                                                                                                      .map((ui) => CircleAvatar(
                                                                                        radius: 30,
                                                                                        backgroundColor:
                                                                                            Colors
                                                                                                .transparent,
                                                                                                                                                  
                                                                                        backgroundImage:
                                                                                            NetworkImage(
                                                                                          ui['image'],
                                                                                        ), //ui['image'],
                                                                                      )),
                                                                                                                                                ])), //AtImage(i['image'],),
                                                                                                                                            Container(),
                                                                                                                                            Text(
                                                                                                                                                                                    lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                                        ? "For you"
                                                                                                                                                                                        : 'Yako',
                                                                                                                                                                                    style: GoogleFonts.lato(
                                                                                                                                                                                        color: text1),
                                                                                                                                                                                  ),
                                                                                                                                          ],
                                                                                                                                        )),
                                                              ),
                                                              ...sky['menu'][0]['menu'].map((i) => Card(
                                                                        color: Colors.transparent,
                                                                        elevation: 0,
                                                                        child: Column(
                                                                          children: [
                                                                            CircleAvatar(
                                                                              radius: 30,
                                                                              backgroundImage:
                                                                                  NetworkImage(
                                                                                i['image'],
                                                                              ), //AtImage(i['image'],),
                                                                            ),
                                                                            const SizedBox(
                                                                              height: 2,
                                                                            ),
                                                                            Text(
                                                                              lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                  ? i['name'].toString()
                                                                                  : kisw(i['name']
                                                                                      .toString()),
                                                                              style: GoogleFonts.lato(
                                                                                  color: text1),
                                                                            )
                                                                          ],
                                                                        ),
                                                                      ) /*Tab(
                                                                                                icon:CircleAvatar(
                                                          radius:25,
                                                                                    
                                                                                                ),
                                                          text: i['name'].toString(),
                                                              )*/
                                                                  ),
                                                            ],
                                                          ),
                                                        ),
                                                      
                                                    ),
                                    
                                                    /*title: Row(
                                                mainAxisAlignment: MainAxisAlignment.start,
                                                children: [
                                                  Chip(
                                                      avatar: Icon(
                                                        //widget.user.split('|').contains('|') ? Icons.group_outlined  &&
                                                        widget.user.toString() == 'Menu'
                                                            ? Icons.storefront
                                                            : widget.user.split('|').length > 1
                                                                ? Icons.group_outlined
                                                                : Icons.qr_code_scanner,
                                                        color: Colors.red,
                                                      ),
                                                      label: Text(
                                                          widget.user.split('|').length > 1
                                                              ? widget.user.split('|')[1].toString()
                                                              : widget.user.toString(),
                                                          style: GoogleFonts.lato(color: Colors.black)))
                                                ]),*/
                                    
                                                    /* FloatingActionButton(
                                      onPressed: () {
                                        Navigator.push(
                                                context,
                                                MaterialPageRoute(
                                                  builder: (context) =>trakstar(title:cart2),
                                                ),
                                              );
                                       /* Navigator.push(
                                                context,
                                                MaterialPageRoute(
                                                  builder: (context) =>trak(title:cart,title2:quantity.toString()),
                                                ),
                                              );*/
                                      },
                                      backgroundColor: Colors.white,
                                      elevation: 0.0,
                                      mini: true,
                                      child: Center(
                                          child: Stack(children: [
                                        Icon(Icons.receipt, color: Colors.red),
                                        Positioned(
                                            top: 0,
                                            right: 1,
                                            child: CircleAvatar(
                                              radius: 4,
                                              backgroundColor: Colors.white,
                                              child: CircleAvatar(
                                                backgroundColor: Colors.yellow,
                                                radius: 6,
                                              ),
                                            ))
                                      ])),
                                    )*/
                                    
                                                    /*FloatingActionButton(
                                                    mini: true,
                                                    backgroundColor: Colors.white,
                                                    elevation: 0.0,
                                                    child: Center(
                                                        child: Stack(children: [
                                                      Icon(Icons.search, color: Colors.blueGrey[900]),
                                                    ])),
                                                    onPressed: () {
                                                      //search starts here
                                                      //print(title.toList());
                                                      Navigator.push(
                                                        context,
                                                        MaterialPageRoute(
                                                            builder: (context) => searchQ(
                                                                  misearch: sky['menu'][0]['menu'],
                                                                  username: widget.me,
                                                                  token: widget.token.toString(),
                                                                )),
                                                      );
                                                    }),*/
                                                  ),
                                    
                                                  /*Chip(
                                                  backgroundColor: Colors.white,
                                                  avatar: Icon(Icons.wallet_giftcard),
                                                  label: Text(widget.user.split('|')[2].toString())),*/
                                                  body: TabBarView(
                                                    controller: _tabController,
                                                    children: [
                                                      Scaffold(
                                                                                                backgroundColor: scaffold1,
                                                                                                body: 
                                                                                                SwipeDetector(
                                                                       // liveFeedback: true,
                                                      onSwipe: (direction, offset) {
                                                        //_addSwipe(direction);
                                                        //setState(){
                                                      //events.add({"${leo}":"Swiped unknown"});
                                                       // };
                                                        
                                                         
                                                      },
                                                      onSwipeUp: (offset) {
                                                         events.add({"${leo}":"Swiped up on scaff|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                        //_addSwipe(SwipeDirection.up);
                                                      },
                                                      onSwipeDown: (offset) {
                                                                                                                                                              events.add({"${leo}":"Swiped down on scaff|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                      
                                                        //_addSwipe(SwipeDirection.down);
                                                      },
                                                      onSwipeLeft: (offset) {
                                                         events.add({"${leo}":"Swiped left on scaff|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                      },
                                                      onSwipeRight: (offset) {
                                                       events.add({"${leo}":"Swiped right on scaff|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                                                      child: SingleChildScrollView(
                                                                                                                                              child: Column(children: [
                                                                                                                                                ListTile(
                                                                                                                                                  title:Center(
                                                                                                                                                    child: Stack(
                                                                                                                                                      children: [
                                                                                                                                                        Container(
                                                                                                                                                          height:170,
                                                                                                                                                          width:MediaQuery.of(context).size.width,
                                                                                                                                                                                 decoration: const BoxDecoration(
                                                                                                                                                        color:Colors.transparent,//mx3Freshfit\assets\20240812_104555.jpg
                                                                                                                                                      image: DecorationImage(image: AssetImage("assets/posterfreshfitv2.png"),fit:BoxFit.cover),
                                                                                                                                                        borderRadius: BorderRadius.all(
                                                                                                                                                                        Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                        )
                                                                                                                                                        ),
                                                                                                                                                            
                                                                                                                                                        child:null
                                                                                                                                                                                                ),
                                                                                                                                                            
                                                                                                                                                                                
                                                                                                                                                                                               
                                                                                                                                                      ],
                                                                                                                                                    ),
                                                                                                                                                  )                                          ),
                                                                                                                                                
                                                                                                                                          ...food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1)
                                                                                                                                                          .map(
                                                                                                                                                              (i) //increase by the number of users
                                                                                                                                                                  //var index = sky.indexOf(i);
                                                                                                                                                                  =>
                                                                                                                                                                  i['owner'].toString() !=
                                                                                                                                                                          widget.me
                                                                                                                                                                              .toString()
                                                                                                                                                                      ? Container()
                                                                                                                                                                      :      ListTile(
                                                                                                                                                  leading: food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).take(1).toList()[0]["ordertrak"].toString() ==
                                                                                                                                                                  'ready' /*i['ordertrak'].toString() == "ready"?Checkbox(value: true, onChanged: (l){}):Checkbox(value: false, onChanged: (l){}), */
                                                                                                                                                              ?
                                                                                                                                                                         
                                                                                                                                                              FloatingActionButton(
                                                                                                                                                                  mini: true,
                                                                                                                                                                  onPressed: () =>
                                                                                                                                                                      retball(),
                                                                                                                                                                  child: Checkbox(
                                                                                                                                                                      value: true,
                                                                                                                                                                      onChanged:
                                                                                                                                                                          (l) {}))
                                                                                                                                                              : Container(
                                                                                                                                                                height:70,
                                                                                                                                                                width: 60,
                                                                                                                                                                decoration: BoxDecoration(
                                                                                                                                                                        color:darkmode? Colors.green:Colors.green.withOpacity(0.5),
                                                                                                                                                                        borderRadius: BorderRadius.all(
                                                                                                                                                              Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                              )),
                                                                                                                                                                  child: Column(
                                                                                                                                                                    mainAxisAlignment: MainAxisAlignment.center,
                                                                                                                                                                    children: [
                                                                                                                                                                    Text("${food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1).toList().last["time"].split(",")[0].toString().split(" ")[0].substring(0,3)}",style:GoogleFonts.rubik(color:text1)),
                                                                                                                                                                    Text("${
                                                                                                                                                                    food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1).toList().last["time"].split(",")[0].toString().split(" ")[1]
                                                                                                                                                                    }",style:GoogleFonts.lato(color:text1,
                                                                                                                                                                    fontWeight:FontWeight.bold,
                                                                                                                                                                    fontSize: 22)),
                                                                                                                                                                    //Text("AUG",style:GoogleFonts.rubik(color:text1)),
                                                                                                                                                                    
                                                                                                                                                                  ],)),
                                                                                                                                                          title: Text(
                                                                                                                                                            lang2 !=
                                                                                                                                                                    "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                ? "On it's way"
                                                                                                                                                                : "Iko njiani",
                                                                                                                                                            style: GoogleFonts.lato(
                                                                                                                                                                fontSize: 20,
                                                                                                                                                                color: text1,
                                                                                                                                                                fontWeight:
                                                                                                                                                                    FontWeight.bold),
                                                                                                                                                          ),
                                                                                                                                                          subtitle: Text(
                                                                                                                                                              lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                  ? "Orders are making way to you"
                                                                                                                                                                  : "Maagizo  yanakuja.",
                                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                                  color: darkmode
                                                                                                                                                                      ? Colors.grey
                                                                                                                                                                      : Colors.grey
                                                                                                                                                                          .shade900)),
                                                                                                                                                            
                                                                                                                                                                          trailing: Icon(Ionicons.open_outline,color: text1,),
                                                                                                                                                        )),
                                                                                                                                                //herex2o
                                                                                                                                                              ...food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1)
                                                                                                                                                          .map(
                                                                                                                                                              (i) //increase by the number of users
                                                                                                                                                                  //var index = sky.indexOf(i);
                                                                                                                                                                  =>
                                                                                                                                                                          
                                                                                                                                                              
                                                                                                                                                                SingleChildScrollView(
                                                                                                                                                                            scrollDirection: Axis.horizontal,
                                                                                                                                                                            child:                                                                     SwipeDetector(
                                                                                                                                                                         // liveFeedback: true,
                                                                                                                                                        onSwipe: (direction, offset) {
                                                                                                                                                          //_addSwipe(direction);
                                                                                                                                                          //setState(){
                                                                                                                                                        //events.add({"${leo}":"Swiped unknown"});
                                                                                                                                                         // };
                                                                                                                                                          
                                                                                                                                                           
                                                                                                                                                        },
                                                                                                                                                        onSwipeUp: (offset) {
                                                                                                                                                           events.add({"${leo}":"Swiped up on Orders are making way to you|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                          //_addSwipe(SwipeDirection.up);
                                                                                                                                                        },
                                                                                                                                                        onSwipeDown: (offset) {
                                                                                                                                                                events.add({"${leo}":"Swiped down Orders are making way to you|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                        
                                                                                                                                                          //_addSwipe(SwipeDirection.down);
                                                                                                                                                        },
                                                                                                                                                        onSwipeLeft: (offset) {
                                                                                                                                                           events.add({"${leo}":"Swiped left on Orders are making way to you|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                        },
                                                                                                                                                        onSwipeRight: (offset) {
                                                                                                                                                         events.add({"${leo}":"Swiped right on Orders are making way to you|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                                                                                                                                                        child: Row(children: [
                                                                                                                                                                                ...i['food'].replaceAll("],", "|").replaceAll("[", "").replaceAll("]]", "").split("|").map((k) =>  Container(
                                                                                                                                                                                          padding: const EdgeInsets.all(3.0),
                                                                                                                                                                                          child: SingleChildScrollView(
                                                                                                                                                                                            child: SizedBox(
                                                                                                                                                                                              child: Card(
                                                                                                                                                                                                color: Colors.transparent,
                                                                                                                                                                                                elevation: 0,
                                                                                                                                                                                                child: Stack(
                                                                                                                                                                                                  //mainAxisAlignment: MainAxisAlignment.start,
                                                                                                                                                                                                  children: [
                                                                                                                                                                                                  Container(
                                                                                                                                                                                                    height: 180,
                                                                                                                                                                                                    width: 180,
                                                                                                                                                                                                    decoration: BoxDecoration(
                                                                                                                                                                                                      //color:Colors.green,
                                                                                                                                                                                                      borderRadius: const BorderRadius.all(const Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                                          ),
                                                                                                                                                                                                      image: DecorationImage(
                                                                                                                                                                                                        image: NetworkImage("${k.split(",")[1].toString().replaceAll(" ", "")}")
                                                                                                                                                                                                        //k.split(",")[1],                                                                         ),
                                                                                                                                                                                                        ,
                                                                                                                                                                                                        fit: BoxFit.cover,
                                                                                                                                                                                                      ),
                                                                                                                                                                                                    ),
                                                                                                                                                                                                    child: null,
                                                                                                                                                                                                  ),
                                                                                                                                                                                                  Positioned(
                                                                                                                                                                                                    bottom: 0,
                                                                                                                                                                                                    child: Container(
                                                                                                                                                                                                      height: 80,
                                                                                                                                                                                                      width: 180,
                                                                                                                                                                                                      decoration: BoxDecoration(
                                                                                                                                                                                                        color:scaffold1.withOpacity(0.6),
                                                                                                                                                                                                        borderRadius: const BorderRadius.all(const Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                                            ),
                                                                                                                                                                                                     
                                                                                                                                                                                                      ),
                                                                                                                                                                                                      child: ListTile(
                                                                                                                                                                                                          title: Text(
                                                                                                                                                                                                            k.split(",")[0],
                                                                                                                                                                                                            style: GoogleFonts.lato(fontSize: 19, color: amount3.contains(i) ? text1 : text1, fontWeight: FontWeight.bold),
                                                                                                                                                                                                          ),
                                                                                                                                                                                                          subtitle:Text(
                                                                                                                                                                                                           "Quantity: ${ k.split(",")[2]} ",
                                                                                                                                                                                                            
                                                                                                                                                                                                            style: GoogleFonts.rubik(
                                                                                                                                                                                                              backgroundColor: Colors.redAccent.withOpacity(0.2),
                                                                                                                                                                                                              fontSize: 15, color: text1, ),
                                                                                                                                                                                                          ), 
                                                                                                                                                                                                        ),
                                                                                                                                                                                                    ),
                                                                                                                                                                                                  )
                                                                                                                                                                                                ]),
                                                                                                                                                                                              ),
                                                                                                                                                                                            ),
                                                                                                                                                                                          ),
                                                                                                                                                                                        
                                                                                                                                                                                        //Text(k.split(",")[0].toString()),
                                                                                                                                                                              
                                                                                                                                                                                        ))]),
                                                                                                                                                                            ),
                                                                                                                                                                          ),
                                                                                                                                                                          
                                                                                                                                                                   
                                                                                                                                                            
                                                                                                                                                              //play within this boundaries
                                                                                                                                                              )
                                                                                                                                                          .toList(),
                                                                                                                                                            
                                                                                                                                                            
                                                                                                                                            ListTile(
                                                                                                                                                title: Text(
                                                                                                                                              lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                  ? "You might like:"
                                                                                                                                                  : "Imependekezwa Kwako",
                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                  fontSize: 20,
                                                                                                                                                  color: text1,
                                                                                                                                                  fontWeight: FontWeight.bold),
                                                                                                                                            )),
                                                                                                                                             Container(
                                                                                                                                                                                                                                     child: SingleChildScrollView(
                                                                                                                                                                                                                                       scrollDirection: Axis.horizontal,
                                                                                                                                                                                                                                       child:                                                                     Row(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                          ...sky['menu'][0]['menu']
                                                                                                                                                                                                                                                                                                                                                                                                                              .map(
                                                                                                                                                                                                                                                                                                                                                                                                                                  (i) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                      SingleChildScrollView(
                                                                                                                                                                                                                                                                                                                                                                                                                                          child:      Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               // alignment: WrapAlignment.spaceEvenly,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ...i['food'].take(1).map((i) => 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const EdgeInsets.all(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      SingleChildScrollView(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    child:       SwipeDetector(
                                                                                                                                                                                                                                                                                                                                                                                                                                                           // liveFeedback: true,
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipe: (direction, offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(direction);
                                                                                                                                                                                                                                                                                                                                                                                                                                            //setState(){
                                                                                                                                                                                                                                                                                                                                                                                                                                          //events.add({"${leo}":"Swiped unknown"});
                                                                                                                                                                                                                                                                                                                                                                                                                                           // };
                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeUp: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                             events.add({"${leo}":"Swiped up on you might like1|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(SwipeDirection.up);
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeDown: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  events.add({"${leo}":"Swiped down on you might like1|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(SwipeDirection.down);
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeLeft: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                             events.add({"${leo}":"Swiped left on you might like1|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeRight: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                           events.add({"${leo}":"Swiped right on you might like1|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          mainAxisAlignment:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              MainAxisAlignment.end,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          SizedBox(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: Card(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: Colors.transparent,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                elevation: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: Column(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      height: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      width: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      decoration: BoxDecoration(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        borderRadius: const BorderRadius.all(Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        image: DecorationImage(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          image: NetworkImage(i['image_url'].toString()),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          fit: BoxFit.cover,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      child: Stack(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              bottom: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              left: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 80,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: !darkmode ? Colors.white12.withOpacity(0.5) : Colors.black12.withOpacity(0.5),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    i['name'].toString(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    style: GoogleFonts.lato(fontSize: 17, color: amount3.contains(i) ? text1 : text1, fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  subtitle: Wrap(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Text(ii == i['name'] ? (int.parse(i['price']) * quantity).toString() + 'KES' : i['price'].toString() + 'KES', style: GoogleFonts.lato(backgroundColor: Colors.red.withOpacity(0.5), color: text1)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Text(" ", style: GoogleFonts.lato(color: text1)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /* Text( ii == i['name']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? (int.parse(i['points']) *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  quantity)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .toString(): i['points']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .toString() 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ,style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: darkmode?Colors.amber.shade200:Colors.amber.shade900
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Icon(Icons.diamond,color:icon1,size:17),*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              )),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              top: 80,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? const SizedBox()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : CircleAvatar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Icon(!amount3.contains(i) ? Icons.add_shopping_cart : null, color: amount3.contains(i) ? Colors.green : Colors.green),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          backgroundColor: amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? !darkmode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? Colors.grey.shade200
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : Colors.amber.shade50
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Colors.amber.shade50),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //order1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    events.add({"${leo}":"Added ${i['name']} to cart  |${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            //prev
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            final prev = ii;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (prev == '1') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            cart.add([
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity == null ? 1 : quantity
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            //i.remove(i['image_url']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount2.add([
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i['name'],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i['image_url'].replaceAll(" ", ""),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              (int.parse(i['price']) * (quantity))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount3.add(i);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print("here's the " + amount3.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount.add((int.parse(i['price']) * (quantity)));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .play(AssetSource("notificationz.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //_total(int.parse(i['price'])*int.parse(quantity));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print(quantity.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print('Summenu'+(int.parse(i[0]['price'])*int.parse(quantity)).toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print(int.parse(i['price'])*quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //here set the state of the boolean
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //_increase(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    SetState() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //amount.add();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(cart.length);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      final quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      i['price'] = (int.parse(i['price']) * (quantity)).toString();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print('amount' + amount.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(i[0].toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  })),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            bottom: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 50,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: 78,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const Text(""),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? Container()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //color:darkmode?Colors.black.withOpacity(0.4):Colors.white.withOpacity(0.2),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Row(mainAxisAlignment: MainAxisAlignment.spaceAround, children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: CircleAvatar(child: const Icon(Icons.add, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      cart.contains(i['name']) ? Container() : _increase(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(cart);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const Text('\t'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Text(ii == i['name'] ? quantity.toString() : '1', style: GoogleFonts.lato(color: text1, fontWeight: FontWeight.bold)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const Text('\t'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: CircleAvatar(child: const Icon(Icons.remove, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //print(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (quantity > 1) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      decrease(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  print(quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ])),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            top: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Container(width: 20), //MediaQuery.of(context).size.width*.05),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)" ? 'Save on ' + '${i['save1']}%' : 'okoa ' + '${i['save1']}%',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  style: GoogleFonts.lato(color: darkmode ? Colors.white : Colors.black, backgroundColor: darkmode ? Colors.red : Colors.red.shade100),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ]))),
                                                                                                                                                                                                                                                                                                                                                                                                                        ]),
                                                                                                                                                                                                                                     ),
                                                                                                                                                                                                                                   ),
                                                                                                                                            const SizedBox(height: 20),
                                                                                                                                            Container(
                                                                                                                                                height: 0.08,
                                                                                                                                                width: MediaQuery.of(context)
                                                                                                                                                        .size
                                                                                                                                                        .width *
                                                                                                                                                    .9,
                                                                                                                                                color: text1),
                                                                                                                                            SizedBox(height: 5),
                                                                                                                                            
                                                                                                                                            food2.reversed
                                                                                                                                                        .where((op) =>
                                                                                                                                                            op['owner'].toString() ==
                                                                                                                                                            widget.me.toString())
                                                                                                                                                        .length <
                                                                                                                                                    1
                                                                                                                                                ? SizedBox(
                                                                                                                                                    //height: 200,
                                                                                                                                                    child:null)
                                                                                                                                                : Card(
                                                                                                                                                    elevation: 0,
                                                                                                                                                    color: scaffold1,
                                                                                                                                                    child: Column(children: [
                                                                                                                                                      ListTile(
                                                                                                                                                          title: Text(
                                                                                                                                                            lang2 !=
                                                                                                                                                                    "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                ? "Recent"
                                                                                                                                                                : "Iliyopita",
                                                                                                                                                            style: GoogleFonts.lato(
                                                                                                                                                                fontSize: 20,
                                                                                                                                                                color: text1,
                                                                                                                                                                fontWeight:
                                                                                                                                                                    FontWeight.bold),
                                                                                                                                                          ),
                                                                                                                                                          subtitle: Text(
                                                                                                                                                              lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                                  ? 'From your orders'
                                                                                                                                                                  : "Kutoka kwa Agizo za awali",
                                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                                  color: darkmode
                                                                                                                                                                      ? Colors.grey
                                                                                                                                                                      : Colors.grey
                                                                                                                                                                          .shade900)),
                                                                                                                                                          trailing: food2.reversed.where((op) => op['owner'].toString() == widget.me.toString()).take(1).toList()[0]["ordertrak"].toString() ==
                                                                                                                                                                  'ready' /*i['ordertrak'].toString() == "ready"?Checkbox(value: true, onChanged: (l){}):Checkbox(value: false, onChanged: (l){}), */
                                                                                                                                                              ?
                                                                                                                                                              /*ListTile(
                                                                                                                                                                    //leading: Text(i['time'].toString(),style:GoogleFonts.lato(color:Colors.black)),
                                                                                                                                                                    title:Text('You spent a total of:'),
                                                                                                                                                                    subtitle: Text(i['totalprice'].toString()+'\tKES'),//
                                                                                                                                                                    
                                                                                                                                                                    //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                                                                                    ), */
                                                                                                                                                              FloatingActionButton(
                                                                                                                                                                  mini: true,
                                                                                                                                                                  onPressed: () =>
                                                                                                                                                                      retball(),
                                                                                                                                                                  child: Checkbox(
                                                                                                                                                                      value: true,
                                                                                                                                                                      onChanged:
                                                                                                                                                                          (l) {}))
                                                                                                                                                              : Container(
                                                                                                                                                                height:70,
                                                                                                                                                                width: 60,
                                                                                                                                                                decoration: BoxDecoration(
                                                                                                                                                                        color:darkmode? Colors.green:Colors.green.withOpacity(0.5),
                                                                                                                                                                        borderRadius: BorderRadius.all(
                                                                                                                                                              Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                              )),
                                                                                                                                                                  child: Column(
                                                                                                                                                                    mainAxisAlignment: MainAxisAlignment.center,
                                                                                                                                                                    children: [
                                                                                                                                                                    Text("${food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1).toList().last["time"].split(",")[0].toString().split(" ")[0].substring(0,3)}",style:GoogleFonts.rubik(color:text1)),
                                                                                                                                                                    Text("${
                                                                                                                                                                    food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString())
                                                                                                                                                          .take(1).toList().last["time"].split(",")[0].toString().split(" ")[1]
                                                                                                                                                                    }",style:GoogleFonts.lato(color:text1,
                                                                                                                                                                    fontWeight:FontWeight.bold,
                                                                                                                                                                    fontSize: 22)),
                                                                                                                                                                    //Text("AUG",style:GoogleFonts.rubik(color:text1)),
                                                                                                                                                                    
                                                                                                                                                                  ],))),
                                                                                                                                                      ...food2.reversed
                                                                                                                                                          .where((op) =>
                                                                                                                                                              op['owner']
                                                                                                                                                                  .toString() ==
                                                                                                                                                              widget.me.toString()).toSet()
                                                                                                                                                          .take(1)
                                                                                                                                                          .map(
                                                                                                                                                              (i) //increase by the number of users
                                                                                                                                                                  //var index = sky.indexOf(i);
                                                                                                                                                                  =>
                                                                                                                                                                  i['owner'].toString() !=
                                                                                                                                                                          widget.me
                                                                                                                                                                              .toString()
                                                                                                                                                                      ? Container()
                                                                                                                                                                      : food2.reversed
                                                                                                                                                                                  .where((op) =>
                                                                                                                                                                                      op['owner'].toString() ==
                                                                                                                                                                                      widget.me
                                                                                                                                                                                          .toString())
                                                                                                                                                                                  .length <
                                                                                                                                                                              1
                                                                                                                                                                          ? Container(
                                                                                                                                                                              child: Text(
                                                                                                                                                                                  "Nothing here for now",
                                                                                                                                                                                  style:
                                                                                                                                                                                      GoogleFonts.lato(color: Colors.black)))
                                                                                                                                                                          : 
                                                                                                                                                                          Container(
                                                                                                                                                                              width: MediaQuery.of(context)
                                                                                                                                                                                  .size
                                                                                                                                                                                  .width,
                                                                                                                                                                              child: Card(
                                                                                                                                                                                  color: scaffold1,
                                                                                                                                                                                  elevation: 0,
                                                                                                                                                                                  child: Column(children: [
                                                                                                                                                                                    const SizedBox(height: 5),
                                                                                                                                                                                    Container(height: 0.08, width: MediaQuery.of(context).size.width * .8, color: text1),
                                                                                                                                                                                    const SizedBox(height: 5),
                                                                                                                                                            
                                                                                                                                                                                    /*ListTile(
                                                                                                                                                                                    title: Text("#" + i['id'].toString())
                                                                                                                                                                                    //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                                                                                                    ),*/
                                                                                                                                                                                    /*ListTile(
                                                                                                                                                                                  leading: Icon(
                                                                                                                                                                                      Icons.storefront,
                                                                                                                                                                                      color: Colors.amber),
                                                                                                                                                                                  title:
                                                                                                                                                                                      Text(i['restaurantx'].toString()),
                                                                                                                                                                                  subtitle: Text(i['table'].toString() == 'Menu'
                                                                                                                                                                                      ? "Pickup order"
                                                                                                                                                                                      : i['table'].toString()), //
                                                                                                                                                                                  /*trailing: Chip(
                                                                                                                                                                                      backgroundColor: Colors.white,
                                                                                                                                                                                      avatar: Icon(Icons.timer_outlined, color: Colors.green),
                                                                                                                                                                                      label: Text(i['table'] == 'Menu' ? i['ordertime'] : 'Anytime')),*/
                                                                                                                                                                                  //title: Text('name',style:GoogleFonts.lato(color:Colors.black)),
                                                                                                                                                                                ),*/
                                                                                                                                                                                    // Text(food7.toString()),
                                                                                                                                                                                    //Text(i['food'].replaceAll("],","|").replaceAll("[","").replaceAll("]]","").split("|")[0].split(",")[0].toString()),
                                                                                                                                                                                    ...i['food'].replaceAll("],", "|").replaceAll("[", "").replaceAll("]]", "").split("|").map((k) => ListTile(
                                                                                                                                                                                            title: Column(
                                                                                                                                                                                          children: [
                                                                                                                                                                                            Card(
                                                                                                                                                                                                elevation: 0,
                                                                                                                                                                                                color: !amount3.contains(i)
                                                                                                                                                                                                    ? scaffold1
                                                                                                                                                                                                    : darkmode
                                                                                                                                                                                                        ? Colors.white12
                                                                                                                                                                                                        : Colors.amber.shade50,
                                                                                                                                                                                                child: Container(
                                                                                                                                                                                                  padding: const EdgeInsets.all(3.0),
                                                                                                                                                                                                  child: SingleChildScrollView(
                                                                                                                                                                                                    child: Row(mainAxisAlignment: MainAxisAlignment.end, children: [
                                                                                                                                                                                                      Container(
                                                                                                                                                                                                        child: Card(
                                                                                                                                                                                                          color: Colors.transparent,
                                                                                                                                                                                                          elevation: 0,
                                                                                                                                                                                                          child: Column(children: [
                                                                                                                                                                                                            Container(
                                                                                                                                                                                                              height: 80,
                                                                                                                                                                                                              width: 79,
                                                                                                                                                                                                              decoration: BoxDecoration(
                                                                                                                                                                                                                //color:Colors.green,
                                                                                                                                                                                                                borderRadius: const BorderRadius.all(const Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                image: DecorationImage(
                                                                                                                                                                                                                  image: NetworkImage("${k.split(",")[1].toString().replaceAll(" ", "")}")
                                                                                                                                                                                                                  //k.split(",")[1],                                                                         ),
                                                                                                                                                                                                                  ,
                                                                                                                                                                                                                  fit: BoxFit.cover,
                                                                                                                                                                                                                ),
                                                                                                                                                                                                              ),
                                                                                                                                                                                                              child: null,
                                                                                                                                                                                                            )
                                                                                                                                                                                                          ]),
                                                                                                                                                                                                        ),
                                                                                                                                                                                                      ),
                                                                                                                                                                                                      Container(
                                                                                                                                                                                                          width: MediaQuery.of(context).size.width > 600 ? MediaQuery.of(context).size.width * .680 : MediaQuery.of(context).size.width * .500,
                                                                                                                                                                                                          child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [
                                                                                                                                                                                                            ListTile(
                                                                                                                                                                                                              title: Text(
                                                                                                                                                                                                                k.split(",")[0],
                                                                                                                                                                                                                style: GoogleFonts.lato(fontSize: 17, color: amount3.contains(i) ? text1 : text1, fontWeight: FontWeight.bold),
                                                                                                                                                                                                              ),
                                                                                                                                                                                                              subtitle: Wrap(
                                                                                                                                                                                                                children: [
                                                                                                                                                                                                                  Text(ii == i['name'] ? (int.parse(k.split(",")[3].toString()) * quantity).toString() + 'KES' : k.split(",")[3].toString() + 'KES',
                                                                                                                                                                                                                      style: GoogleFonts.lato(
                                                                                                                                                                                                                          /*backgroundColor: Colors
                                                                                                                                                                                .red
                                                                                                                                                                                .withOpacity(
                                                                                                                                                                                    0.1),*/
                                                                                                                                                                                                                          color: Colors.green)),
                                                                                                                                                                                                                  Text(" ", style: GoogleFonts.lato(color: text1)),
                                                                                                                                                            
                                                                                                                                                                                                                  /* Text( ii == i['name']
                                                                                                                                                                              ? (int.parse(i['points']) *
                                                                                                                                                                                          quantity)
                                                                                                                                                                                      .toString(): i['points']
                                                                                                                                                                                      .toString() 
                                                                                                                                                                                  ,style: GoogleFonts.lato(
                                                                                                                                                                                    color: darkmode?Colors.amber.shade200:Colors.amber.shade900
                                                                                                                                                                                  ),),
                                                                                                                                                                                  Icon(Icons.diamond,color:icon1,size:17),*/
                                                                                                                                                                                                                ],
                                                                                                                                                                                                              ),
                                                                                                                                                                                                            ),
                                                                                                                                                                                                          ])),
                                                                                                                                                                                                      Container(
                                                                                                                                                                                                        width: MediaQuery.of(context).size.width * .137,
                                                                                                                                                                                                        child: Column(mainAxisAlignment: MainAxisAlignment.center, children: [
                                                                                                                                                                                                          // ListTile(),
                                                                                                                                                                                                          Center(
                                                                                                                                                                                                            child: ListTile(
                                                                                                                                                                                                              title: Center(child: Text(k.split(",")[2].toString(), style: GoogleFonts.lato(fontWeight: FontWeight.bold, color: text1))),
                                                                                                                                                                                                              //leading:,Row(children:[ CircleAvatar(child:Icon(Icons.shopping_bag,color:Colors.green),radius:15,backgroundColor:Colors.grey[200])
                                                                                                                                                                                                              //    ,Text('1')])
                                                                                                                                                                                                              //trailing: Text(ii == i['name']?(int.parse(i['price'])*quantity).toString()+'/=':i['price'].toString()+'/=',style:GoogleFonts.lato(fontSize:15,fontWeight:FontWeight.bold)),
                                                                                                                                                            
                                                                                                                                                                                                              //subtitle: Text(i['price'].toString()),
                                                                                                                                                                                                            ),
                                                                                                                                                                                                          ),
                                                                                                                                                                                                          // ListTile()
                                                                                                                                                                                                        ]),
                                                                                                                                                                                                      )
                                                                                                                                                                                                    ]),
                                                                                                                                                                                                  ),
                                                                                                                                                                                                )
                                                                                                                                                            
                                                                                                                                                                                                //end
                                                                                                                                                                                                )
                                                                                                                                                                                            /* ListTile(
                                                                                                                                                                                     leading: 
                                                                                                                                                                                      CircleAvatar(
                                                                                                                                                                                        backgroundColor: Colors.transparent,
                                                                                                                                                    radius: 30,
                                                                                                                                                    backgroundImage: NetworkImage(
                                                                                                                                                      k.split(",")[1].toString()
                                                                                                                                                    ), //AtImage(i['image'],),
                                                                                                                                                  ),
                                                                                                                                                                                    
                                                                                                                                                                                     title: Text(k.split(",")[1].toString()),
                                                                                                                                                                                   ),*/
                                                                                                                                                            
                                                                                                                                                                                            //  ...food7.map((lo)=>//Text(lo['name'].toString())
                                                                                                                                                                                            // lo['name'] ==k.split(",")[0].toString()?  Text(k.split(",")[0].toString()):SizedBox())
                                                                                                                                                                                            //
                                                                                                                                                                                            ,
                                                                                                                                                                                            const SizedBox(height: 10),
                                                                                                                                                                                            Container(height: 0.07, width: MediaQuery.of(context).size.width * .8, color: text1),
                                                                                                                                                                                            const SizedBox(height: 10),
                                                                                                                                                                                          ],
                                                                                                                                                                                        )
                                                                                                                                                                                            //Text(k.split(",")[0].toString()),
                                                                                                                                                            
                                                                                                                                                                                            )),
                                                                                                                                                            
                                                                                                                                                                                    Container(
                                                                                                                                                                                      height: 30,
                                                                                                                                                                                    ),
                                                                                                                                                                                    Container(
                                                                                                                                                                                      height: 10,
                                                                                                                                                                                    ),
                                                                                                                                                                                  ])),
                                                                                                                                                                            )
                                                                                                                                                            
                                                                                                                                                              //play within this boundaries
                                                                                                                                                              ).toSet()
                                                                                                                                                          .toList()
                                                                                                                                                    ])),
                                                                                                                                            
                                                                                                                                                            ListTile(
                                                                                                                                                              title: Row(
                                                                                                                                                                mainAxisAlignment: MainAxisAlignment.start,
                                                                                                                                                                children: [
                                                                                                                                                                  Container(
                                                                                                                                                                                height:
                                                                                                                                                                                    320,
                                                                                                                                                                                width: MediaQuery.of(context).size.width*.9,
                                                                                                                                                                                decoration:
                                                                                                                                                                                    BoxDecoration(
                                                                                                                                                                                  borderRadius: const BorderRadius.all(
                                                                                                                                                                                      Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                      ),
                                                                                                                                                                                  image:
                                                                                                                                                                                      DecorationImage(
                                                                                                                                                                                    image:
                                                                                                                                                                                        AssetImage('assets/ourad.png'),
                                                                                                                                                                                    fit: BoxFit
                                                                                                                                                                                        .cover,
                                                                                                                                                                                  ),
                                                                                                                                                                                ),
                                                                                                                                                                                child:
                                                                                                                                                                                    null),
                                                                                                                                                            
                                                                                                                                                                  /*                                                                   Container(
                                                                                                                                                                                height:
                                                                                                                                                                                    180,
                                                                                                                                                                                width: 180,
                                                                                                                                                                                decoration:
                                                                                                                                                                                    BoxDecoration(
                                                                                                                                                                                  borderRadius: const BorderRadius.all(
                                                                                                                                                                                      Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                      ),
                                                                                                                                                                                  image:
                                                                                                                                                                                      DecorationImage(
                                                                                                                                                                                    image:
                                                                                                                                                                                        AssetImage('assets/ourad.png'),
                                                                                                                                                                                    fit: BoxFit
                                                                                                                                                                                        .cover,
                                                                                                                                                                                  ),
                                                                                                                                                                                ),
                                                                                                                                                                                child:
                                                                                                                                                                                    null),     
                                                                                                                                                                */],
                                                                                                                                                              )
                                                                                                                                                            ),
                                                                                                                                                             ListTile(
                                                                                                                                                title: Text(
                                                                                                                                              lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                                                                  ? "People buy these:"
                                                                                                                                                  : "Watu hununua bidhaa hizi",
                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                  fontSize: 20,
                                                                                                                                                  color: text1,
                                                                                                                                                  fontWeight: FontWeight.bold),
                                                                                                                                            )),
                                                                                                                                             Container(
                                                                                                                                                                                                                                     child: SingleChildScrollView(
                                                                                                                                                                                                                                       scrollDirection: Axis.horizontal,
                                                                                                                                                                                                                                       child:                                                                     Row(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                          ...sky['menu'][0]['menu'].reversed.toList()
                                                                                                                                                                                                                                                                                                                                                                                                                              .map(
                                                                                                                                                                                                                                                                                                                                                                                                                                  (i) =>
                                                                                                                                                                                                                                                                                                                                                                                                                                      SingleChildScrollView(
                                                                                                                                                                                                                                                                                                                                                                                                                                          child:      Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               // alignment: WrapAlignment.spaceEvenly,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ...i['food'].take(1).map((i) => 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  padding:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const EdgeInsets.all(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          3.0),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      SingleChildScrollView(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    child:       SwipeDetector(
                                                                                                                                                                                                                                                                                                                                                                                                                                                           // liveFeedback: true,
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipe: (direction, offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(direction);
                                                                                                                                                                                                                                                                                                                                                                                                                                            //setState(){
                                                                                                                                                                                                                                                                                                                                                                                                                                          //events.add({"${leo}":"Swiped unknown"});
                                                                                                                                                                                                                                                                                                                                                                                                                                           // };
                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeUp: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                             events.add({"${leo}":"Swiped up people buy these|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(SwipeDirection.up);
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeDown: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  events.add({"${leo}":"Swiped down on people buy these|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                                                                                                                                                                                                            //_addSwipe(SwipeDirection.down);
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeLeft: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                             events.add({"${leo}":"Swiped left on people buy these|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                          },
                                                                                                                                                                                                                                                                                                                                                                                                                                          onSwipeRight: (offset) {
                                                                                                                                                                                                                                                                                                                                                                                                                                           events.add({"${leo}":"Swiped right on people buy these|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          mainAxisAlignment:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              MainAxisAlignment.end,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          SizedBox(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: Card(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: Colors.transparent,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                elevation: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: Column(children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      height: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      width: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      decoration: BoxDecoration(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        borderRadius: const BorderRadius.all(Radius.circular(10.0) //                 <--- border radius here
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        image: DecorationImage(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          image: NetworkImage(i['image_url'].toString()),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          fit: BoxFit.cover,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      child: Stack(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              bottom: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              left: 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 80,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: 180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                color: !darkmode ? Colors.white12.withOpacity(0.5) : Colors.black12.withOpacity(0.5),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: ListTile(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  title: Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    i['name'].toString(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    style: GoogleFonts.lato(fontSize: 17, color: amount3.contains(i) ? text1 : text1, fontWeight: FontWeight.bold),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  subtitle: Wrap(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Text(ii == i['name'] ? (int.parse(i['price']) * quantity).toString() + 'KES' : i['price'].toString() + 'KES', style: GoogleFonts.lato(backgroundColor: Colors.red.withOpacity(0.5), color: text1)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Text(" ", style: GoogleFonts.lato(color: text1)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /* Text( ii == i['name']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? (int.parse(i['points']) *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  quantity)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .toString(): i['points']
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              .toString() 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ,style: GoogleFonts.lato(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            color: darkmode?Colors.amber.shade200:Colors.amber.shade900
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Icon(Icons.diamond,color:icon1,size:17),*/
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              )),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              top: 80,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? const SizedBox()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : CircleAvatar(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Icon(!amount3.contains(i) ? Icons.add_shopping_cart : null, color: amount3.contains(i) ? Colors.green : Colors.green),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          backgroundColor: amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? !darkmode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? Colors.grey.shade200
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : Colors.amber.shade50
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : Colors.amber.shade50),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //order1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    events.add({"${leo}":"Added ${i['name']} to cart  |${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            //prev
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            final prev = ii;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (prev == '1') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            cart.add([
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity == null ? 1 : quantity
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            //i.remove(i['image_url']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount2.add([
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i['name'],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              i['image_url'].replaceAll(" ", ""),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              quantity,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              (int.parse(i['price']) * (quantity))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount3.add(i);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            print("here's the " + amount3.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            amount.add((int.parse(i['price']) * (quantity)));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   audioCache
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      .play(AssetSource("notificationz.mp3"));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //_total(int.parse(i['price'])*int.parse(quantity));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print(quantity.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print('Summenu'+(int.parse(i[0]['price'])*int.parse(quantity)).toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //print(int.parse(i['price'])*quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //here set the state of the boolean
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //_increase(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    SetState() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //amount.add();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(cart.length);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      final quantity = 1;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      i['price'] = (int.parse(i['price']) * (quantity)).toString();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print('amount' + amount.toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(i[0].toString());
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  })),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            bottom: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                height: 50,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                width: 78,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: Row(mainAxisAlignment: MainAxisAlignment.spaceBetween, children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const Text(""),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  amount3.contains(i)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? Container()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //color:darkmode?Colors.black.withOpacity(0.4):Colors.white.withOpacity(0.2),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          child: Row(mainAxisAlignment: MainAxisAlignment.spaceAround, children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Container(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              child: InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  child: CircleAvatar(child: const Icon(Icons.add, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      cart.contains(i['name']) ? Container() : _increase(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      print(cart);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    print(quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const Text('\t'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Text(ii == i['name'] ? quantity.toString() : '1', style: GoogleFonts.lato(color: text1, fontWeight: FontWeight.bold)),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const Text('\t'),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            InkWell(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                child: CircleAvatar(child: const Icon(Icons.remove, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                onTap: () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //print(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  setState(() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (quantity > 1) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      decrease(i['name']);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  print(quantity);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ])),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Positioned(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            top: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            right: 5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            child: Row(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Container(width: 20), //MediaQuery.of(context).size.width*.05),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Text(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)" ? 'Save on ' + '${i['save1']}%' : 'okoa ' + '${i['save1']}%',
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  style: GoogleFonts.lato(color: darkmode ? Colors.white : Colors.black, backgroundColor: darkmode ? Colors.red : Colors.red.shade100),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ]),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ]))),
                                                                                                                                                                                                                                                                                                                                                                                                                        ]),
                                                                                                                                                                                                                                     ),
                                                                                                                                                                                                                                   ),
                                                                                                                                           
                                                                                                                                                            
                                                                                                                                                            ListTile(
                                                                                                                                                title: Text(
                                                                                                                                              "",
                                                                                                                                              style: GoogleFonts.lato(
                                                                                                                                                  fontSize: 20,
                                                                                                                                                  color: text1,
                                                                                                                                                  fontWeight: FontWeight.bold),
                                                                                                                                            )),
                                                                                                                                          ])),
                                                                                                )),
                                                      ...sky['menu'][0]['menu']
                                                          .map((i) => SingleChildScrollView(
                                                                  child:       SwipeDetector(
                                                       // liveFeedback: true,
                                      onSwipe: (direction, offset) {
                                        //_addSwipe(direction);
                                        //setState(){
                                      //events.add({"${leo}":"Swiped unknown"});
                                       // };
                                        
                                         
                                      },
                                      onSwipeUp: (offset) {
                                         events.add({"${leo}":"Swiped up on ${i['name']}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                        //_addSwipe(SwipeDirection.up);
                                      },
                                      onSwipeDown: (offset) {
                                                                                                                                              events.add({"${leo}":"Swiped down on ${i['name']}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                      
                                        //_addSwipe(SwipeDirection.down);
                                      },
                                      onSwipeLeft: (offset) {
                                         events.add({"${leo}":"Swiped left on ${i['name']}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                      },
                                      onSwipeRight: (offset) {
                                       events.add({"${leo}":"Swiped right on ${i['name']}|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});  },
                                      child: Column(children: [
                                                                                                                                    ...i['food'].map((i) => Card(
                                                                      color: !amount3.contains(i)
                                                                          ? scaffold1
                                                                          : darkmode
                                                                              ? Colors.white12
                                                                              : Colors.amber.shade50,
                                                                      elevation: 0,
                                                                      child: 
                                                                      
                                                                      Container(
                                                                        padding:
                                                                            const EdgeInsets.all(3.0),
                                                                        child: SingleChildScrollView(
                                                                          child: Row(
                                                                              mainAxisAlignment:
                                                                                  MainAxisAlignment.end,
                                                                              children: [
                                                                                Container(
                                                                                  child: Card(
                                                                                    color: Colors
                                                                                        .transparent,
                                                                                    elevation: 0,
                                                                                    child: Column(
                                                                                        children: [
                                                                                          Container(
                                                                                              height:
                                                                                                  80,
                                                                                              width: MediaQuery.of(context)
                                                                                                      .size
                                                                                                      .width *
                                                                                                  .19,
                                                                                              decoration:
                                                                                                  BoxDecoration(
                                                                                                borderRadius: const BorderRadius.all(
                                                                                                    Radius.circular(10.0) //                 <--- border radius here
                                                                                                    ),
                                                                                                image:
                                                                                                    DecorationImage(
                                                                                                  image:
                                                                                                      NetworkImage(i['image_url'].toString()),
                                                                                                  fit: BoxFit
                                                                                                      .cover,
                                                                                                ),
                                                                                              ),
                                                                                              child:
                                                                                                  null)
                                                                                        ]),
                                                                                  ),
                                                                                ),
                                                                                Container(
                                                                                    width: MediaQuery.of(
                                                                                                context)
                                                                                            .size
                                                                                            .width *
                                                                                        .351,
                                                                                    child: Column(
                                                                                        mainAxisAlignment:
                                                                                            MainAxisAlignment
                                                                                                .start,
                                                                                        children: [
                                                                                          ListTile(
                                                                                            title: Text(
                                                                                              i['name']
                                                                                                  .toString(),
                                                                                              style: GoogleFonts.lato(
                                                                                                  fontSize:
                                                                                                      17,
                                                                                                  color: amount3.contains(i)
                                                                                                      ? text1
                                                                                                      : text1,
                                                                                                  fontWeight:
                                                                                                      FontWeight.bold),
                                                                                            ),
                                                                                            subtitle:
                                                                                                Wrap(
                                                                                              children: [
                                                                                                Text(
                                                                                                    ii == i['name']
                                                                                                        ? (int.parse(i['price']) * quantity).toString() + 'KES'
                                                                                                        : i['price'].toString() + 'KES',
                                                                                                    style: GoogleFonts.lato(
                                                                                                        /*backgroundColor: Colors
                                                                                                .red
                                                                                                .withOpacity(
                                                                                                    0.1),*/
                                                                                                        color: Colors.green)),
                                                                                                Text(
                                                                                                    " ",
                                                                                                    style:
                                                                                                        GoogleFonts.lato(color: text1)),
                                                                                                        
                                                                                                /* Text( ii == i['name']
                                                                                              ? (int.parse(i['points']) *
                                                                                                          quantity)
                                                                                                      .toString(): i['points']
                                                                                                      .toString() 
                                                                                                  ,style: GoogleFonts.lato(
                                                                                                    color: darkmode?Colors.amber.shade200:Colors.amber.shade900
                                                                                                  ),),
                                                                                                  Icon(Icons.diamond,color:icon1,size:17),*/
                                                                                              ],
                                                                                            ),
                                                                                          ),
                                                                                          Row(
                                                                                            children: [
                                                                                              Container(
                                                                                                  width:
                                                                                                      20), //MediaQuery.of(context).size.width*.05),
                                                                                              Text(
                                                                                                lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)"
                                                                                                    ? 'Save on ' +
                                                                                                        '${i['save1']}%'
                                                                                                    : 'okoa ' +
                                                                                                        '${i['save1']}%',
                                                                                                style: GoogleFonts.lato(
                                                                                                    color: darkmode
                                                                                                        ? Colors.white
                                                                                                        : Colors.black,
                                                                                                    backgroundColor: darkmode ? Colors.white24 : Colors.orange.shade100),
                                                                                              ),
                                                                                            ],
                                                                                          ),
                                                                                          Container(
                                                                                            height: 10,
                                                                                          ),
                                                                                        ])),
                                                                                Container(
                                                                                  width: MediaQuery.of(
                                                                                              context)
                                                                                          .size
                                                                                          .width *
                                                                                      .37,
                                                                                  child: Column(
                                                                                      children: [
                                                                                        ListTile(
                                                                                          //leading:
                                                                                          title:
                                                                                              const SizedBox(),
                                                                                          //subtitle:
                                                                                          trailing: InkWell(
                                                                                              child: amount3.contains(i)
                                                                                                  ? const SizedBox()
                                                                                                  : Chip(
                                                                                                      avatar: Icon(!amount3.contains(i) ? Icons.shopping_cart_outlined : null, color: amount3.contains(i) ? Colors.green : Colors.green),
                                                                                                      label: lang2 != "Kiswahili (ðŸ‡°ðŸ‡ª)" ? Text(amount3.contains(i) ? 'Added' : 'Add') : Text(amount3.contains(i) ? 'Umeweka' : 'weka'),
                                                                                                      backgroundColor: amount3.contains(i)
                                                                                                          ?  !darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]?.withOpacity(0.4)
                                                                                                          : Colors.white24),
                                                                                              onTap: () {
                                                                                                //order1
                                                                                                //
                                                                                               events.add({"${leo}":"Added ${i['name']} to cart|${widget.me}|${widget.title == "newuser"?"firsttime_user":"returning_user"}"});
                                                                                                amount3.contains(i)
                                                                                                    ? ''
                                                                                                    : setState(() {
                                                                                                        //prev
                                                                                                        final prev = ii;
                                                                                                        if (prev == '1') {
                                                                                                          quantity = 1;
                                                                                                        }
                                                                                                        ;
                                                                                                        cart.add([
                                                                                                          i,
                                                                                                          quantity == null ? 1 : quantity
                                                                                                        ]);
                                                                                                        //i.remove(i['image_url']);
                                                                                                        
                                                                                                        amount2.add([
                                                                                                          i['name'],
                                                                                                          i['image_url'].replaceAll(" ", ""),
                                                                                                          quantity,
                                                                                                          (int.parse(i['price']) * (quantity))
                                                                                                        ]);
                                                                                                        amount3.add(i);
                                                                                                        print("here's the " + amount3.toString());
                                                                                                        
                                                                                                        amount.add((int.parse(i['price']) * (quantity)));
                                                                                                        
                                                                                                        quantity = 1;
                                                                                                        audioCache
                                                                                                                                    .play(AssetSource("notificationz.mp3"));
                                                                                                      });
                                                                                                        
                                                                                                //_total(int.parse(i['price'])*int.parse(quantity));
                                                                                                        
                                                                                                //print(quantity.toString());
                                                                                                //print('Summenu'+(int.parse(i[0]['price'])*int.parse(quantity)).toString());
                                                                                                //print(int.parse(i['price'])*quantity);
                                                                                                        
                                                                                                //here set the state of the boolean
                                                                                                //_increase(i['name']);
                                                                                                        
                                                                                                SetState() {
                                                                                                  //amount.add();
                                                                                                        
                                                                                                  print(
                                                                                                      cart.length);
                                                                                                  final quantity =
                                                                                                      1;
                                                                                                  i['price'] =
                                                                                                      (int.parse(i['price']) * (quantity)).toString();
                                                                                                  print('amount' +
                                                                                                      amount.toString());
                                                                                                  print(
                                                                                                      i[0].toString());
                                                                                                }
                                                                                                        
                                                                                                ;
                                                                                              }),
                                                                                        ),
                                                                                        ListTile(
                                                                                            //leading:,Row(children:[ CircleAvatar(child:Icon(Icons.shopping_bag,color:Colors.green),radius:15,backgroundColor:Colors.grey[200])
                                                                                            //    ,Text('1')])
                                                                                            //trailing: Text(ii == i['name']?(int.parse(i['price'])*quantity).toString()+'/=':i['price'].toString()+'/=',style:GoogleFonts.lato(fontSize:15,fontWeight:FontWeight.bold)),
                                                                                                        
                                                                                            //subtitle: Text(i['price'].toString()),
                                                                                            title: Row(
                                                                                                mainAxisAlignment:
                                                                                                    MainAxisAlignment.spaceBetween,
                                                                                                children: [
                                                                                              const Text(
                                                                                                  ""),
                                                                                              amount3.contains(
                                                                                                      i)
                                                                                                  ? Container()
                                                                                                  : Container(
                                                                                                      child: Row(mainAxisAlignment: MainAxisAlignment.spaceAround, children: [
                                                                                                        Container(
                                                                                                          child: InkWell(
                                                                                                              child: CircleAvatar(child: const Icon(Icons.add, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                              onTap: () {
                                                                                                                print(i['name']);
                                                                                                                setState(() {
                                                                                                                  cart.contains(i['name']) ? Container() : _increase(i['name']);
                                                                                                                  print(cart);
                                                                                                                });
                                                                                                                print(quantity);
                                                                                                              }),
                                                                                                        ),
                                                                                                        const Text('\t'),
                                                                                                        Text(ii == i['name'] ? quantity.toString() : '1', style: GoogleFonts.lato(color: text1)),
                                                                                                        const Text('\t'),
                                                                                                        InkWell(
                                                                                                            child: CircleAvatar(child: const Icon(Icons.remove, color: Colors.green), radius: 15, backgroundColor: darkmode ? Colors.grey[200]?.withOpacity(0.4) : Colors.grey[200]),
                                                                                                            onTap: () {
                                                                                                              //print(i['name']);
                                                                                                              setState(() {
                                                                                                                if (quantity > 1) {
                                                                                                                  decrease(i['name']);
                                                                                                                }
                                                                                                              });
                                                                                                              print(quantity);
                                                                                                            }),
                                                                                                      ]),
                                                                                                    )
                                                                                            ])),
                                                                                      ]),
                                                                                )
                                                                              ]),
                                                                        ),
                                                                      )
                                                                                                        
                                                                      //end
                                                                      )),
                                                                      
                                                                                                                                  ]),
                                                                  ))),
                                                  // Text("uisduisd")
                                                    ],
                                                  ),
                                                  floatingActionButton: 
                                                  
                                                  Column(
                                                      mainAxisAlignment: MainAxisAlignment.end,
                                                      children: [
                                                         OverlayTutorialHole(
                                                                                      enabled: overlaycounter == 6 ? true : false,
                                                                                      overlayTutorialEntry: OverlayTutorialRectEntry(
                                                                                        padding: const EdgeInsets.all( 20.0),
                                                                                        radius: const Radius.circular(25.0),
                                                                                        overlayTutorialHints: <OverlayTutorialWidgetHint>[
                                                                                          OverlayTutorialWidgetHint(
                                                                                            position: (rect) => Offset(-1.0, rect.height),
                                                                                            builder: (context, entryRect) {
                                                                                              return Center(
                                                                                                child: GestureDetector(
                                                                                                  onTap: () {
                                                                                                    setState(() {
                                                                                                          isTutorialenabled = false;
                                     
                                                                                                   //   overlaycounter++;
                                                                                                      audioCache
                                                                  .play(AssetSource("congrats.mp3"));
                                                                  _controllerTopCenter.play();
                                                                                                    });
                                                                                                  },
                                                                                                  child: const tut13(),
                                                                                                ),
                                                                                              );
                                                                                            },
                                                                                          ),
                                                                                        ],
                                                                                      ),
                                                                                      child: Container(
                                                                  height: 70,
                                                                  width: 70,
                                                                  child: FloatingActionButton(
                                                                    onPressed: () {
                                                                      _tabController.animateTo(0,);
                                                                                              
                                                                      addtomatukio();
                                                                      events.clear();//+amount2.toString()
                                                                            print(widget.user +widget.token.toString()+widget.me.toString()+widget.firstname.toString()+ widget.geolocation.toString()+ widget.id.toString());                       
                                                                      Navigator.push(
                                                                                                          context,
                                                                                                          MaterialPageRoute(
                                                                                                            builder: (context) => Cart1(text1:text1,leo:leo,now:now,scaffold1:scaffold1,user:widget.user,lang2:lang2,amount2:amount2,amount:amount,amount3:amount3,cart:cart,token: widget.token.toString(),me:widget.me,firstname:widget.firstname,geolocation: widget.geolocation, id:int.parse(widget.id))
                                                                                                          ),
                                                                                                        );/*Navigator.push(
                                                                                                          context,
                                                                                                          MaterialPageRoute(
                                                                                                            builder: (context) =>trak(title:cart,title2:quantity.toString(),title3:amount),
                                                                                                          ),
                                                                                                        );*/
                                                                    },
                                                                    backgroundColor: Colors.green,
                                                                    elevation: 0.0,
                                                                    //mini: true,
                                                                    child: Center(
                                                                        child: Stack(
                                                                            clipBehavior: Clip.none,
                                                                            children: [
                                                                          const Icon(
                                                                              Icons
                                                                                  .shopping_cart_outlined,
                                                                              size: 30,
                                                                              color: Colors.yellow),
                                                                          Positioned(
                                                                              top: -3,
                                                                              right: -4,
                                                                              child: CircleAvatar(
                                                                                radius: 8,
                                                                                backgroundColor:
                                                                                    Colors.white,
                                                                                child: CircleAvatar(
                                                                                  backgroundColor:
                                                                                      Colors.red,
                                                                                  radius: 8,
                                                                                  child: Center(
                                                                                      child: Text(
                                                                                          cart.length
                                                                                              .toString(),
                                                                                          style: GoogleFonts.lato(
                                                                                              color: Colors
                                                                                                  .white,
                                                                                                  fontWeight: FontWeight.bold,
                                                                                              fontSize:
                                                                                                  10)) //cartfav
                                                                                      ),
                                                                                ),
                                                                              ))
                                                                        ])),
                                                                  ),
                                                                ),
                                                        )
                                                           // : Container(),
                                                      ]))),
                                        ),
              Positioned(
                right: MediaQuery.of(context).size.width*.5,
                top:
                 
                    // confetti will pop from top-center
                    -10,
                child: SizedBox(
                  child: Center(
                    child: ConfettiWidget(
                      confettiController: _controllerTopCenter,
                      blastDirectionality: BlastDirectionality
                          .explosive, // don't specify a direction, blast randomly
                      shouldLoop:
                          false, // start again as soon as the animation is finished
                      colors: const [
                        Colors.green,
                        Colors.yellow,
                        Colors.green,
                        Colors.orange,
                        Colors.greenAccent,
                      ], // manually specify the colors to be used
                      //createParticlePath: drawStar, // define a custom shape/path.
                    ),
                  ),
                ),
              )
              
                ],
              ),
              ),
                 // autoPlay: true,
                 // autoPlayDelay: const Duration(seconds: 3),
                
             
            
        ): Scaffold(
          backgroundColor: darkmode? Colors.grey.shade900:Colors.white,
            body: Center(
                child: SizedBox(
                    height: MediaQuery.of(context).size.height*.4,
                    width: MediaQuery.of(context).size.width*.4,
                    child: 
                      Lottie.asset('assets/LottieLogo1.json'),
                
                     )));
  }
}
